#cloud-config
package_update: true
packages:
  - bash-completion
  - python3
  - python3-pip
users:
  - name: drew
    sudo: ['ALL=(ALL) NOPASSWD:ALL']
    groups: sudo
    shell: /bin/bash
    lock_passwd: false
    passwd: $6$rounds=4096$nQEeaHtrjiUlxOPi$LQlgi0XBR6u46AJFhWxsWBBK8YqHbGWYWkWnG.YhmdYkc/lMiAacMwQAbZ0W7MosLFexushHQpfa05eG7gsL/1
    ssh-authorized-keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDQlba47olSkYMMh40lIMnU5TPAYStp4FrSPvruGmuM01OYSbamZdE7fEec3UnSKR6rQNpEthVqr61tlz2yXxnWbOmLBaxQwT8Q1h3wiEWR5WPeBUmDpuEmHJtZzUZKeUABDQHfywN01yZ8RZssCdPvziS9t9pgeHlfL4hnkAFNbhgfOniNhtEIBeLsmNDinAH2TvCXv3cYTzwXC9n2E3ruwEgmWTxieWNVFBoa8QKkhXiw+h08cYv9ZaP5yi8h2oXpJTKFUZ5LId1xuIhb95K7sBLr83vMLU7CGjlFTvet6MiEKXrPjY1hbvUf1+uFZZQSYOANR+9Gtviolxux7IAH
write_files:
  - content: |
      export METHOD=cloud
      export ONDEMAND_CELLULAR=false
      export ONDEMAND_WIFI=false
      # export ONDEMAND_WIFI_EXCLUDE
      export STORE_PKI=true
      export DNS_ADBLOCKING=true
      export SSH_TUNNELING=true
      # export ENDPOINT=hostname
      export USERS=wordpress1,wordpress2
      # export REPO_SLUG
      # export REPO_BRANCH
      # export EXTRA_VARS
      # export ANSIBLE_EXTRA_ARGS="-e server=''"
    path: /etc/environment
    append: true
  - path: /opt/config.cfg
    permissions: 600
    encoding: base64
    content: LS0tCgojIFRoaXMgaXMgdGhlIGxpc3Qgb2YgdXNlcnMgdG8gZ2VuZXJhdGUuCiMgRXZlcnkgZGV2aWNlIG11c3QgaGF2ZSBhIHVuaXF1ZSB1c2VyLgojIFlvdSBjYW4gYWRkIHVwIHRvIDY1LDUzNCBuZXcgdXNlcnMgb3ZlciB0aGUgbGlmZXRpbWUgb2YgYW4gQWxnb1ZQTi4KIyBVc2VyIG5hbWVzIHdpdGggbGVhZGluZyAwJ3Mgb3IgY29udGFpbmluZyBvbmx5IG51bWJlcnMgc2hvdWxkIGJlIGVzY2FwZWQgaW4gZG91YmxlIHF1b3RlcywgZS5nLiAiMDAwZGFuIiBvciAiMTIzIi4KIyBFbWFpbCBhZGRyZXNzZXMgYXJlIG5vdCBhbGxvd2VkLgp1c2VyczoKICAtIHdvcmRwcmVzczEKICAtIHdvcmRwcmVzczIKCiMjIyBSZXZpZXcgdGhlc2Ugb3B0aW9ucyBCRUZPUkUgeW91IHJ1biBBbGdvLCBhcyB0aGV5IGFyZSB2ZXJ5IGRpZmZpY3VsdC9pbXBvc3NpYmxlIHRvIGNoYW5nZSBhZnRlciB0aGUgc2VydmVyIGlzIGRlcGxveWVkLgoKIyBDaGFuZ2UgZGVmYXVsdCBTU0ggcG9ydCBmb3IgdGhlIGNsb3VkIHJvbGVzIG9ubHkKIyBJdCBkb2Vzbid0IGFwcGx5IGlmIHlvdSBkZXBsb3kgdG8geW91ciBleGlzdGluZyBVYnVudHUgU2VydmVyCnNzaF9wb3J0OiA0MTYwCgojIERlcGxveSBTdHJvbmdTd2FuIHRvIGVuYWJsZSBJUHNlYyBzdXBwb3J0Cmlwc2VjX2VuYWJsZWQ6IGZhbHNlCgojIERlcGxveSB3aXJlZ3VhcmQKIyB3aXJlZ3VhcmQgd2lsbCBsaXN0ZW4gb24gNTE4MjAvVURQLiBZb3UgbWlnaHQgbmVlZCB0byBjaGFuZ2UgdG8gYW5vdGhlciBwb3J0CiMgaWYgeW91ciBuZXR3b3JrIGJsb2NrcyB0aGlzIG9uZS4gQmUgYXdhcmUgdGhhdCA1My9VRFAgKEROUykgaXMgYmxvY2tlZCBvbiBzb21lCiMgbW9iaWxlIGRhdGEgbmV0d29ya3MuCndpcmVndWFyZF9lbmFibGVkOiB0cnVlCndpcmVndWFyZF9wb3J0OiA1MTg0MAoKIyBUaGlzIGZlYXR1cmUgYWxsb3dzIHlvdSB0byBjb25maWd1cmUgdGhlIEFsZ28gc2VydmVyIHRvIHNlbmQgb3V0Ym91bmQgdHJhZmZpYwojIHRocm91Z2ggYSBkaWZmZXJlbnQgZXh0ZXJuYWwgSVAgYWRkcmVzcyB0aGFuIHRoZSBvbmUgeW91IGFyZSBlc3RhYmxpc2hpbmcgdGhlIFZQTiBjb25uZWN0aW9uIHdpdGguCiMgTW9yZSBpbmZvIGh0dHBzOi8vdHJhaWxvZmJpdHMuZ2l0aHViLmlvL2FsZ28vY2xvdWQtYWx0ZXJuYXRpdmUtaW5ncmVzcy1pcC5odG1sCiMgQXZhaWxhYmxlIGZvciB0aGUgZm9sbG93aW5nIGNsb3VkIHByb3ZpZGVyczoKIyAtIERpZ2l0YWxPY2VhbgphbHRlcm5hdGl2ZV9pbmdyZXNzX2lwOiBmYWxzZQoKIyBSZWR1Y2UgdGhlIE1UVSBvZiB0aGUgVlBOIHR1bm5lbAojIFNvbWUgY2xvdWQgYW5kIGludGVybmV0IHByb3ZpZGVycyB1c2UgYSBzbWFsbGVyIE1UVSAoTWF4aW11bSBUcmFuc21pc3Npb24KIyBVbml0KSB0aGFuIHRoZSBub3JtYWwgdmFsdWUgb2YgMTUwMCBhbmQgaWYgeW91IGRvbid0IHJlZHVjZSB0aGUgTVRVIG9mIHlvdXIKIyBWUE4gdHVubmVsIHNvbWUgbmV0d29yayBjb25uZWN0aW9ucyB3aWxsIGhhbmcuIEFsZ28gd2lsbCBhdHRlbXB0IHRvIHNldCB0aGlzCiMgYXV0b21hdGljYWxseSBiYXNlZCBvbiB5b3VyIHNlcnZlciwgYnV0IGlmIGNvbm5lY3Rpb25zIGhhbmcgeW91IG1pZ2h0IG5lZWQgdG8KIyBhZGp1c3QgdGhpcyB5b3Vyc2VsZi4KIyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS90cmFpbG9mYml0cy9hbGdvL2Jsb2IvbWFzdGVyL2RvY3MvdHJvdWJsZXNob290aW5nLm1kI3ZhcmlvdXMtd2Vic2l0ZXMtYXBwZWFyLXRvLWJlLW9mZmxpbmUtdGhyb3VnaC10aGUtdnBuCnJlZHVjZV9tdHU6IDAKCiMgQWxnbyB3aWxsIHVzZSB0aGUgZm9sbG93aW5nIGxpc3RzIHRvIGJsb2NrIGFkcy4gWW91IGNhbiBhZGQgbmV3IGJsb2NrIGxpc3RzCiMgYWZ0ZXIgZGVwbG95bWVudCBieSBtb2RpZnlpbmcgdGhlIGxpbmUgc3RhcnRpbmcgIkJMT0NLTElTVF9VUkxTPSIgYXQ6CiMgL3Vzci9sb2NhbC9zYmluL2FkYmxvY2suc2gKIyBJZiB5b3UgbG9hZCB2ZXJ5IGxhcmdlIGJsb2NrbGlzdHMsIHlvdSBtYXkgYWxzbyBoYXZlIHRvIG1vZGlmeSByZXNvdXJjZSBsaW1pdHM6CiMgL2V0Yy9zeXN0ZW1kL3N5c3RlbS9kbnNtYXNxLnNlcnZpY2UuZC8xMDAtQ3VzdG9tTGltaXRhdGlvbnMuY29uZgphZGJsb2NrX2xpc3RzOgogLSAiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1N0ZXZlbkJsYWNrL2hvc3RzL21hc3Rlci9ob3N0cyIKCiMgRW5hYmxlIEROUyBlbmNyeXB0aW9uLgojIElmICdmYWxzZScsICdkbnNfc2VydmVycycgc2hvdWxkIGJlIHNwZWNpZmllZCBiZWxvdy4KIyBETlMgZW5jcnlwdGlvbiBjYW4gbm90IGJlIGRpc2FibGVkIGlmIEROUyBhZGJsb2NraW5nIGlzIGVuYWJsZWQKZG5zX2VuY3J5cHRpb246IHRydWUKCiMgQmxvY2sgdHJhZmZpYyBiZXR3ZWVuIGNvbm5lY3RlZCBjbGllbnRzLiBDaGFuZ2UgdGhpcyB0byBmYWxzZSB0byBlbmFibGUKIyBjb25uZWN0ZWQgY2xpZW50cyB0byByZWFjaCBlYWNoIG90aGVyLCBhcyB3ZWxsIGFzIG90aGVyIGNvbXB1dGVycyBvbiB0aGUKIyBzYW1lIExBTiBhcyB5b3VyIEFsZ28gc2VydmVyIChpLmUuIHRoZSAicm9hZCB3YXJyaW9yIiBzZXR1cCkuIEluIHRoaXMKIyBjYXNlLCB5b3UgbWF5IGFsc28gd2FudCB0byBlbmFibGUgU01CL0NJRlMgYW5kIE5FVEJJT1MgdHJhZmZpYyBiZWxvdy4KQmV0d2VlbkNsaWVudHNfRFJPUDogdHJ1ZQoKIyBCbG9jayBTTUIvQ0lGUyB0cmFmZmljCmJsb2NrX3NtYjogdHJ1ZQoKIyBCbG9jayBORVRCSU9TIHRyYWZmaWMKYmxvY2tfbmV0YmlvczogdHJ1ZQoKIyBZb3VyIEFsZ28gc2VydmVyIHdpbGwgYXV0b21hdGljYWxseSBpbnN0YWxsIHNlY3VyaXR5IHVwZGF0ZXMuIFNvbWUgdXBkYXRlcwojIHJlcXVpcmUgYSByZWJvb3QgdG8gdGFrZSBlZmZlY3QgYnV0IHlvdXIgQWxnbyBzZXJ2ZXIgd2lsbCBub3QgcmVib290IGl0c2VsZgojIGF1dG9tYXRpY2FsbHkgdW5sZXNzIHlvdSBjaGFuZ2UgJ2VuYWJsZWQnIGJlbG93IGZyb20gJ2ZhbHNlJyB0byAndHJ1ZScsIGluCiMgd2hpY2ggY2FzZSBhIHJlYm9vdCB3aWxsIHRha2UgcGxhY2UgaWYgbmVjZXNzYXJ5IGF0IHRoZSB0aW1lIHNwZWNpZmllZCAoYXMKIyBISDpNTSkgaW4gdGhlIHRpbWUgem9uZSBvZiB5b3VyIEFsZ28gc2VydmVyLiBUaGUgZGVmYXVsdCB0aW1lIHpvbmUgaXMgVVRDLgp1bmF0dGVuZGVkX3JlYm9vdDoKICBlbmFibGVkOiB0cnVlCiAgdGltZTogMDg6MDAKCiMjIyBBZHZhbmNlZCB1c2VycyBvbmx5IGJlbG93IHRoaXMgbGluZSAjIyMKCiMgRE5TIHNlcnZlcnMgd2hpY2ggd2lsbCBiZSB1c2VkIGlmICdkbnNfZW5jcnlwdGlvbicgaXMgJ3RydWUnLiBNdWx0aXBsZQojIHByb3ZpZGVycyBtYXkgYmUgc3BlY2lmaWVkLCBidXQgYXZvaWQgbWl4aW5nIHByb3ZpZGVycyB0aGF0IGZpbHRlciByZXN1bHRzCiMgKGxpa2UgQ2lzY28pIHdpdGggdGhvc2UgdGhhdCBkb24ndCAobGlrZSBDbG91ZGZsYXJlKSBvciB5b3UgY291bGQgZ2V0CiMgaW5jb25zaXN0ZW50IHJlc3VsdHMuIFRoZSBsaXN0IG9mIGF2YWlsYWJsZSBwdWJsaWMgcHJvdmlkZXJzIGNhbiBiZSBmb3VuZAojIGhlcmU6CiMgaHR0cHM6Ly9naXRodWIuY29tL0ROU0NyeXB0L2Ruc2NyeXB0LXJlc29sdmVycy9ibG9iL21hc3Rlci92Mi9wdWJsaWMtcmVzb2x2ZXJzLm1kCmRuc2NyeXB0X3NlcnZlcnM6CiAgaXB2NDoKICAgIC0gY2xvdWRmbGFyZQojICAgLSBnb29nbGUKIyAgIC0gPFlvdXJDdXN0b21TZXJ2ZXI+ICAjIEUuZy4sIGlmIHVzaW5nIE5leHRETlMsIHRoaXMgd2lsbCBiZSBzb21ldGhpbmcgbGlrZSBOZXh0RE5TLWFiYzEyMy4KICAgICAgICAgICAgICAgICAgICAgICAgICAjIFlvdSBtdXN0IGFsc28gZmlsbCBpbiBjdXN0b21fc2VydmVyX3N0YW1wcyBiZWxvdy4gWW91IG1heSBzcGVjaWZ5CiAgICAgICAgICAgICAgICAgICAgICAgICAgIyBtdWx0aXBsZSBjdXN0b20gc2VydmVycy4KICBpcHY2OgogICAgLSBjbG91ZGZsYXJlLWlwdjYKCmN1c3RvbV9zZXJ2ZXJfc3RhbXBzOgojIFlvdXJDdXN0b21TZXJ2ZXI6ICdzZG5zOi8vLi4uJwoKIyBETlMgc2VydmVycyB3aGljaCB3aWxsIGJlIHVzZWQgaWYgJ2Ruc19lbmNyeXB0aW9uJyBpcyAnZmFsc2UnLgojIEZhbGxiYWNrIHJlc29sdmVycyBmb3Igc3lzdGVtZC1yZXNvbHZlZAojIFRoZSBkZWZhdWx0IGlzIHRvIHVzZSBDbG91ZGZsYXJlLgpkbnNfc2VydmVyczoKICBpcHY0OgogICAgLSAxLjEuMS4xCiAgICAtIDEuMC4wLjEKICBpcHY2OgogICAgLSAyNjA2OjQ3MDA6NDcwMDo6MTExMQogICAgLSAyNjA2OjQ3MDA6NDcwMDo6MTAwMQoKIyBTdG9yZSB0aGUgUEtJIGluIGEgcmFtIGRpc2suIEVuYWJsZWQgb25seSBpZiBzdG9yZV9wa2kgKHJldGFpbiB0aGUgUEtJKSBpcyBzZXQgdG8gZmFsc2UKIyBTdXBwb3J0cyBvbiBNYWNPUyBhbmQgTGludXggb25seSAoaW5jbHVkaW5nIFdpbmRvd3MgU3Vic3lzdGVtIGZvciBMaW51eCkKcGtpX2luX3RtcGZzOiB0cnVlCgojIFNldCB0aGlzIHRvICd0cnVlJyB3aGVuIHJ1bm5pbmcgJy4vYWxnbyB1cGRhdGUtdXNlcnMnIGlmIHlvdSB3YW50IEFMTCB1c2VycyB0byBnZXQgbmV3IGNlcnRzLCBub3QganVzdCBuZXcgdXNlcnMuCmtleXNfY2xlYW5fYWxsOiBmYWxzZQoKIyBTdHJvbmdTd2FuIGxvZyBsZXZlbAojIGh0dHBzOi8vd2lraS5zdHJvbmdzd2FuLm9yZy9wcm9qZWN0cy9zdHJvbmdzd2FuL3dpa2kvTG9nZ2VyQ29uZmlndXJhdGlvbgpzdHJvbmdzd2FuX2xvZ19sZXZlbDogMgoKIyByaWdodHNvdXJjZWlwIGZvciBpcHNlYwojIGlwdjQKc3Ryb25nc3dhbl9uZXR3b3JrOiAxMC40OC4wLjAvMTYKIyBpcHY2CnN0cm9uZ3N3YW5fbmV0d29ya19pcHY2OiAnMjAwMTpkYjg6NDE2MDo6LzQ4JwoKIyBJZiB5b3UncmUgYmVoaW5kIE5BVCBvciBhIGZpcmV3YWxsIGFuZCB5b3Ugd2FudCB0byByZWNlaXZlIGluY29taW5nIGNvbm5lY3Rpb25zIGxvbmcgYWZ0ZXIgbmV0d29yayB0cmFmZmljIGhhcyBnb25lIHNpbGVudC4KIyBUaGlzIG9wdGlvbiB3aWxsIGtlZXAgdGhlICJjb25uZWN0aW9uIiBvcGVuIGluIHRoZSBleWVzIG9mIE5BVC4KIyBTZWU6IGh0dHBzOi8vd3d3LndpcmVndWFyZC5jb20vcXVpY2tzdGFydC8jbmF0LWFuZC1maXJld2FsbC10cmF2ZXJzYWwtcGVyc2lzdGVuY2UKd2lyZWd1YXJkX1BlcnNpc3RlbnRLZWVwYWxpdmU6IDAKCiMgd2lyZWd1YXJkIG5ldHdvcmsgY29uZmlndXJhdGlvbgp3aXJlZ3VhcmRfbmV0d29ya19pcHY0OiAxMC40OS4wLjAvMTYKd2lyZWd1YXJkX25ldHdvcmtfaXB2NjogMjAwMTpkYjg6YTE2MDo6LzQ4CgojIFJhbmRvbWx5IGdlbmVyYXRlZCBJUCBhZGRyZXNzIGZvciB0aGUgbG9jYWwgZG5zIHJlc29sdmVyCmxvY2FsX3NlcnZpY2VfaXA6ICJ7eyAnMTcyLjE2LjAuMScgfCBpcG1hdGgoMTA0ODU3MyB8IHJhbmRvbShzZWVkPWFsZ29fc2VydmVyX25hbWUgKyBhbnNpYmxlX2ZxZG4pKSB9fSIKbG9jYWxfc2VydmljZV9pcHY2OiAie3sgJ2ZkMDA6OjEnIHwgaXBtYXRoKDEwNDg1NzMgfCByYW5kb20oc2VlZD1hbGdvX3NlcnZlcl9uYW1lICsgYW5zaWJsZV9mcWRuKSkgfX0iCgojIEhpZGUgc2Vuc2l0aXZlIGRhdGEKbm9fbG9nOiB0cnVlCgpjb25ncmF0czoKICBjb21tb246IHwKICAgICIjICAgICAgICAgICAgICAgICAgICAgICAgICBDb25ncmF0dWxhdGlvbnMhICAgICAgICAgICAgICAgICAgICAgICAgICAgICMiCiAgICAiIyAgICAgICAgICAgICAgICAgICAgIFlvdXIgQWxnbyBzZXJ2ZXIgaXMgcnVubmluZy4gICAgICAgICAgICAgICAgICAgICAjIgogICAgIiMgICAgQ29uZmlnIGZpbGVzIGFuZCBjZXJ0aWZpY2F0ZXMgYXJlIGluIHRoZSAuL2NvbmZpZ3MvIGRpcmVjdG9yeS4gICAgIyIKICAgICIjICAgICAgICAgICAgICBHbyB0byBodHRwczovL3dob2VyLm5ldC8gYWZ0ZXIgY29ubmVjdGluZyAgICAgICAgICAgICAgICMiCiAgICAiIyAgICAgICAgYW5kIGVuc3VyZSB0aGF0IGFsbCB5b3VyIHRyYWZmaWMgcGFzc2VzIHRocm91Z2ggdGhlIFZQTi4gICAgICAjIgogICAgIiMgICAgICAgICAgICAgICAgICAgICBMb2NhbCBETlMgcmVzb2x2ZXIge3sgbG9jYWxfc2VydmljZV9pcCB9fXt7ICcsICcgKyBsb2NhbF9zZXJ2aWNlX2lwdjYgaWYgaXB2Nl9zdXBwb3J0IGVsc2UgJycgfX0gICAgICAgICAgICAgICAgICAgIyIKICBwMTJfcGFzczogfAogICAgIiMgICAgICAgIFRoZSBwMTIgYW5kIFNTSCBrZXlzIHBhc3N3b3JkIGZvciBuZXcgdXNlcnMgaXMge3sgcDEyX2V4cG9ydF9wYXNzd29yZCB9fSAgICAgICAjIgogIGNhX2tleV9wYXNzOiB8CiAgICAiIyAgICAgICAgVGhlIENBIGtleSBwYXNzd29yZCBpcyB7eyBDQV9wYXNzd29yZHxkZWZhdWx0KG9taXQpIH19ICAgICAgICMiCiAgc3NoX2FjY2VzczogfAogICAgIiMgICAgICBTaGVsbCBhY2Nlc3M6IHNzaCAtRiBjb25maWdzL3t7IGFuc2libGVfc3NoX2hvc3R8ZGVmYXVsdChvbWl0KSB9fS9zc2hfY29uZmlnIHt7IGFsZ29fc2VydmVyX25hbWUgfX0gICAgICAgICMiCgpTU0hfa2V5czoKICBjb21tZW50OiBhbGdvQHNzaAogIHByaXZhdGU6IGNvbmZpZ3MvYWxnby5wZW0KICBwcml2YXRlX3RtcDogL3RtcC9hbGdvLXNzaC5wZW0KICBwdWJsaWM6IGNvbmZpZ3MvYWxnby5wZW0ucHViCgpjbG91ZF9wcm92aWRlcnM6CiAgYXp1cmU6CiAgICBzaXplOiBTdGFuZGFyZF9CMVMKICAgIG9zRGlzazoKICAgICAgIyBUaGUgc3RvcmFnZSBhY2NvdW50IHR5cGUgdG8gdXNlIGZvciB0aGUgT1MgZGlzay4gUG9zc2libGUgdmFsdWVzOgogICAgICAjICdTdGFuZGFyZF9MUlMnLCAnUHJlbWl1bV9MUlMnLCAnU3RhbmRhcmRTU0RfTFJTJywgJ1VsdHJhU1NEX0xSUycsCiAgICAgICMgJ1ByZW1pdW1fWlJTJywgJ1N0YW5kYXJkU1NEX1pSUycsICdQcmVtaXVtVjJfTFJTJy4KICAgICAgdHlwZTogU3RhbmRhcmRfTFJTCiAgICBpbWFnZToKICAgICAgcHVibGlzaGVyOiBDYW5vbmljYWwKICAgICAgb2ZmZXI6IDAwMDEtY29tLXVidW50dS1taW5pbWFsLWphbW15LWRhaWx5CiAgICAgIHNrdTogbWluaW1hbC0yMl8wNC1kYWlseS1sdHMKICAgICAgdmVyc2lvbjogbGF0ZXN0CiAgZGlnaXRhbG9jZWFuOgogICAgc2l6ZTogcy0xdmNwdS0xZ2IKICAgIGltYWdlOiAidWJ1bnR1LTIyLTA0LXg2NCIKICBlYzI6CiAgICAjIENoYW5nZSB0aGUgZW5jcnlwdGVkIGZsYWcgdG8gImZhbHNlIiB0byBkaXNhYmxlIEFXUyB2b2x1bWUgZW5jcnlwdGlvbi4KICAgIGVuY3J5cHRlZDogdHJ1ZQogICAgIyBTZXQgdXNlX2V4aXN0aW5nX2VpcCB0byAidHJ1ZSIgaWYgeW91IHdhbnQgdG8gdXNlIGEgcHJlLWFsbG9jYXRlZCBFbGFzdGljIElQCiAgICAjIEFkZGl0aW9uYWwgcHJvbXB0IHdpbGwgYmUgcmFpc2VkIHRvIGRldGVybWluZSB3aGljaCBJUCB0byB1c2UKICAgIHVzZV9leGlzdGluZ19laXA6IGZhbHNlCiAgICBzaXplOiB0Mi5taWNybwogICAgaW1hZ2U6CiAgICAgIG5hbWU6ICJ1YnVudHUtamFtbXktMjIuMDQiCiAgICAgIGFyY2g6IHg4Nl82NAogICAgICBvd25lcjogIjA5OTcyMDEwOTQ3NyIKICAgICMgQ2hhbmdlIGluc3RhbmNlX21hcmtldF90eXBlIGZyb20gIm9uLWRlbWFuZCIgdG8gInNwb3QiIHRvIGxhdW5jaCBhIHNwb3QKICAgICMgaW5zdGFuY2UuIFNlZSBkZXBsb3ktZnJvbS1hbnNpYmxlLm1kIGZvciBzcG90J3MgYWRkaXRpb25hbCBJQU0gcGVybWlzc2lvbgogICAgaW5zdGFuY2VfbWFya2V0X3R5cGU6IG9uLWRlbWFuZAogIGdjZToKICAgIHNpemU6IGUyLW1pY3JvCiAgICBpbWFnZTogdWJ1bnR1LTIyMDQtbHRzCiAgICBleHRlcm5hbF9zdGF0aWNfaXA6IGZhbHNlCiAgbGlnaHRzYWlsOgogICAgc2l6ZTogbmFub18yXzAKICAgIGltYWdlOiB1YnVudHVfMjJfMDQKICBzY2FsZXdheToKICAgIHNpemU6IERFVjEtUwogICAgaW1hZ2U6IFVidW50dSAyMi4wNCBKYW1teSBKZWxseWZpc2gKICAgIGFyY2g6IHg4Nl82NAogIGhldHpuZXI6CiAgICBzZXJ2ZXJfdHlwZTogY3gxMQogICAgaW1hZ2U6IHVidW50dS0yMi4wNAogIG9wZW5zdGFjazoKICAgIGZsYXZvcl9yYW06ICI+PTQwOTYiCiAgICBpbWFnZTogIi0tT1M6IFVidW50dSAyMi4wNCAoSmFtbXkpIC1EaXNrOiAxMEdCIC1SQU06IDUxMk1CIgogIGNsb3Vkc3RhY2s6CiAgICBzaXplOiBNaWNybwogICAgaW1hZ2U6IExpbnV4IFVidW50dSAyMi4wNCBMVFMgNjQtYml0CiAgICBkaXNrOiAxMAogIHZ1bHRyOgogICAgb3M6IFVidW50dSAyMi4wNCBMVFMgeDY0CiAgICBzaXplOiAxMDI0IE1CIFJBTSwyNSBHQiBTU0QsMS4wMCBUQiBCVwogIGxpbm9kZToKICAgIHR5cGU6IGc2LW5hbm9kZS0xCiAgICBpbWFnZTogbGlub2RlL3VidW50dTIyLjA0CiAgbG9jYWw6CgpmYWlsX2hpbnQ6CiAgLSBTb3JyeSwgYnV0IHNvbWV0aGluZyB3ZW50IHdyb25nIQogIC0gUGxlYXNlIGNoZWNrIHRoZSB0cm91Ymxlc2hvb3RpbmcgZ3VpZGUuCiAgLSBodHRwczovL3RyYWlsb2ZiaXRzLmdpdGh1Yi5pby9hbGdvL3Ryb3VibGVzaG9vdGluZy5odG1sCgpib29sZWFuc19tYXA6CiAgWTogdHJ1ZQogIHk6IHRydWU=
  - path: /etc/crontab
    content: 30 23   * * *   root 30 23 * * * root /usr/sbin/shutdown -h
    append: true
    defer: true
runcmd:
  - git clone https://github.com/trailofbits/algo.git /opt/algo
  - cd /opt
  - export ENDPOINT=$(curl ifconfig.me)
  - chmod +x /opt/algo/install.sh
  - cp -f /opt/config.cfg /opt/algo/config.cfg
  - algo/install.sh
  - chown -R drew:drew /opt/algo
