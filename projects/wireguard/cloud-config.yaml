#cloud-config
package_update: true
packages:
  - bash-completion
  - python3
  - python3-pip
users:
  - name: drew
    sudo: ['ALL=(ALL) NOPASSWD:ALL']
    groups: sudo
    shell: /bin/bash
    lock_passwd: false
    passwd: $6$rounds=4096$nQEeaHtrjiUlxOPi$LQlgi0XBR6u46AJFhWxsWBBK8YqHbGWYWkWnG.YhmdYkc/lMiAacMwQAbZ0W7MosLFexushHQpfa05eG7gsL/1
    ssh-authorized-keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDQlba47olSkYMMh40lIMnU5TPAYStp4FrSPvruGmuM01OYSbamZdE7fEec3UnSKR6rQNpEthVqr61tlz2yXxnWbOmLBaxQwT8Q1h3wiEWR5WPeBUmDpuEmHJtZzUZKeUABDQHfywN01yZ8RZssCdPvziS9t9pgeHlfL4hnkAFNbhgfOniNhtEIBeLsmNDinAH2TvCXv3cYTzwXC9n2E3ruwEgmWTxieWNVFBoa8QKkhXiw+h08cYv9ZaP5yi8h2oXpJTKFUZ5LId1xuIhb95K7sBLr83vMLU7CGjlFTvet6MiEKXrPjY1hbvUf1+uFZZQSYOANR+9Gtviolxux7IAH
write_files:
  - content: |
      export METHOD=cloud
      export ONDEMAND_CELLULAR=false
      export ONDEMAND_WIFI=false
      # export ONDEMAND_WIFI_EXCLUDE
      export STORE_PKI=true
      export DNS_ADBLOCKING=true
      export SSH_TUNNELING=true
      # export ENDPOINT=
      export USERS=user1,user2
      # export REPO_SLUG
      # export REPO_BRANCH
      # export EXTRA_VARS
      # export ANSIBLE_EXTRA_ARGS="-e server=''"
    path: /etc/environment
    append: true
  - path: /opt/config.cfg
    permissions: 600
    encoding: base64
    content: LS0tCgojIFRoaXMgaXMgdGhlIGxpc3Qgb2YgdXNlcnMgdG8gZ2VuZXJhdGUuCiMgRXZlcnkgZGV2aWNlIG11c3QgaGF2ZSBhIHVuaXF1ZSB1c2VyLgojIFlvdSBjYW4gYWRkIHVwIHRvIDY1LDUzNCBuZXcgdXNlcnMgb3ZlciB0aGUgbGlmZXRpbWUgb2YgYW4gQWxnb1ZQTi4KIyBVc2VyIG5hbWVzIHdpdGggbGVhZGluZyAwJ3Mgb3IgY29udGFpbmluZyBvbmx5IG51bWJlcnMgc2hvdWxkIGJlIGVzY2FwZWQgaW4gZG91YmxlIHF1b3RlcywgZS5nLiAiMDAwZGFuIiBvciAiMTIzIi4KIyBFbWFpbCBhZGRyZXNzZXMgYXJlIG5vdCBhbGxvd2VkLgp1c2VyczoKICAtIHVzZXIxCiAgLSB1c2VyMgoKIyMjIFJldmlldyB0aGVzZSBvcHRpb25zIEJFRk9SRSB5b3UgcnVuIEFsZ28sIGFzIHRoZXkgYXJlIHZlcnkgZGlmZmljdWx0L2ltcG9zc2libGUgdG8gY2hhbmdlIGFmdGVyIHRoZSBzZXJ2ZXIgaXMgZGVwbG95ZWQuCgojIENoYW5nZSBkZWZhdWx0IFNTSCBwb3J0IGZvciB0aGUgY2xvdWQgcm9sZXMgb25seQojIEl0IGRvZXNuJ3QgYXBwbHkgaWYgeW91IGRlcGxveSB0byB5b3VyIGV4aXN0aW5nIFVidW50dSBTZXJ2ZXIKc3NoX3BvcnQ6IDQxNjAKCiMgRGVwbG95IFN0cm9uZ1N3YW4gdG8gZW5hYmxlIElQc2VjIHN1cHBvcnQKaXBzZWNfZW5hYmxlZDogZmFsc2UKCiMgRGVwbG95IFdpcmVHdWFyZAojIFdpcmVHdWFyZCB3aWxsIGxpc3RlbiBvbiA1MTgyMC9VRFAuIFlvdSBtaWdodCBuZWVkIHRvIGNoYW5nZSB0byBhbm90aGVyIHBvcnQKIyBpZiB5b3VyIG5ldHdvcmsgYmxvY2tzIHRoaXMgb25lLiBCZSBhd2FyZSB0aGF0IDUzL1VEUCAoRE5TKSBpcyBibG9ja2VkIG9uIHNvbWUKIyBtb2JpbGUgZGF0YSBuZXR3b3Jrcy4Kd2lyZWd1YXJkX2VuYWJsZWQ6IHRydWUKd2lyZWd1YXJkX3BvcnQ6IDUxODQwCgojIFRoaXMgZmVhdHVyZSBhbGxvd3MgeW91IHRvIGNvbmZpZ3VyZSB0aGUgQWxnbyBzZXJ2ZXIgdG8gc2VuZCBvdXRib3VuZCB0cmFmZmljCiMgdGhyb3VnaCBhIGRpZmZlcmVudCBleHRlcm5hbCBJUCBhZGRyZXNzIHRoYW4gdGhlIG9uZSB5b3UgYXJlIGVzdGFibGlzaGluZyB0aGUgVlBOIGNvbm5lY3Rpb24gd2l0aC4KIyBNb3JlIGluZm8gaHR0cHM6Ly90cmFpbG9mYml0cy5naXRodWIuaW8vYWxnby9jbG91ZC1hbHRlcm5hdGl2ZS1pbmdyZXNzLWlwLmh0bWwKIyBBdmFpbGFibGUgZm9yIHRoZSBmb2xsb3dpbmcgY2xvdWQgcHJvdmlkZXJzOgojIC0gRGlnaXRhbE9jZWFuCmFsdGVybmF0aXZlX2luZ3Jlc3NfaXA6IGZhbHNlCgojIFJlZHVjZSB0aGUgTVRVIG9mIHRoZSBWUE4gdHVubmVsCiMgU29tZSBjbG91ZCBhbmQgaW50ZXJuZXQgcHJvdmlkZXJzIHVzZSBhIHNtYWxsZXIgTVRVIChNYXhpbXVtIFRyYW5zbWlzc2lvbgojIFVuaXQpIHRoYW4gdGhlIG5vcm1hbCB2YWx1ZSBvZiAxNTAwIGFuZCBpZiB5b3UgZG9uJ3QgcmVkdWNlIHRoZSBNVFUgb2YgeW91cgojIFZQTiB0dW5uZWwgc29tZSBuZXR3b3JrIGNvbm5lY3Rpb25zIHdpbGwgaGFuZy4gQWxnbyB3aWxsIGF0dGVtcHQgdG8gc2V0IHRoaXMKIyBhdXRvbWF0aWNhbGx5IGJhc2VkIG9uIHlvdXIgc2VydmVyLCBidXQgaWYgY29ubmVjdGlvbnMgaGFuZyB5b3UgbWlnaHQgbmVlZCB0bwojIGFkanVzdCB0aGlzIHlvdXJzZWxmLgojIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL3RyYWlsb2ZiaXRzL2FsZ28vYmxvYi9tYXN0ZXIvZG9jcy90cm91Ymxlc2hvb3RpbmcubWQjdmFyaW91cy13ZWJzaXRlcy1hcHBlYXItdG8tYmUtb2ZmbGluZS10aHJvdWdoLXRoZS12cG4KcmVkdWNlX210dTogMAoKIyBBbGdvIHdpbGwgdXNlIHRoZSBmb2xsb3dpbmcgbGlzdHMgdG8gYmxvY2sgYWRzLiBZb3UgY2FuIGFkZCBuZXcgYmxvY2sgbGlzdHMKIyBhZnRlciBkZXBsb3ltZW50IGJ5IG1vZGlmeWluZyB0aGUgbGluZSBzdGFydGluZyAiQkxPQ0tMSVNUX1VSTFM9IiBhdDoKIyAvdXNyL2xvY2FsL3NiaW4vYWRibG9jay5zaAojIElmIHlvdSBsb2FkIHZlcnkgbGFyZ2UgYmxvY2tsaXN0cywgeW91IG1heSBhbHNvIGhhdmUgdG8gbW9kaWZ5IHJlc291cmNlIGxpbWl0czoKIyAvZXRjL3N5c3RlbWQvc3lzdGVtL2Ruc21hc3Euc2VydmljZS5kLzEwMC1DdXN0b21MaW1pdGF0aW9ucy5jb25mCmFkYmxvY2tfbGlzdHM6CiAtICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vU3RldmVuQmxhY2svaG9zdHMvbWFzdGVyL2hvc3RzIgoKIyBFbmFibGUgRE5TIGVuY3J5cHRpb24uCiMgSWYgJ2ZhbHNlJywgJ2Ruc19zZXJ2ZXJzJyBzaG91bGQgYmUgc3BlY2lmaWVkIGJlbG93LgojIEROUyBlbmNyeXB0aW9uIGNhbiBub3QgYmUgZGlzYWJsZWQgaWYgRE5TIGFkYmxvY2tpbmcgaXMgZW5hYmxlZApkbnNfZW5jcnlwdGlvbjogdHJ1ZQoKIyBCbG9jayB0cmFmZmljIGJldHdlZW4gY29ubmVjdGVkIGNsaWVudHMuIENoYW5nZSB0aGlzIHRvIGZhbHNlIHRvIGVuYWJsZQojIGNvbm5lY3RlZCBjbGllbnRzIHRvIHJlYWNoIGVhY2ggb3RoZXIsIGFzIHdlbGwgYXMgb3RoZXIgY29tcHV0ZXJzIG9uIHRoZQojIHNhbWUgTEFOIGFzIHlvdXIgQWxnbyBzZXJ2ZXIgKGkuZS4gdGhlICJyb2FkIHdhcnJpb3IiIHNldHVwKS4gSW4gdGhpcwojIGNhc2UsIHlvdSBtYXkgYWxzbyB3YW50IHRvIGVuYWJsZSBTTUIvQ0lGUyBhbmQgTkVUQklPUyB0cmFmZmljIGJlbG93LgpCZXR3ZWVuQ2xpZW50c19EUk9QOiB0cnVlCgojIEJsb2NrIFNNQi9DSUZTIHRyYWZmaWMKYmxvY2tfc21iOiB0cnVlCgojIEJsb2NrIE5FVEJJT1MgdHJhZmZpYwpibG9ja19uZXRiaW9zOiB0cnVlCgojIFlvdXIgQWxnbyBzZXJ2ZXIgd2lsbCBhdXRvbWF0aWNhbGx5IGluc3RhbGwgc2VjdXJpdHkgdXBkYXRlcy4gU29tZSB1cGRhdGVzCiMgcmVxdWlyZSBhIHJlYm9vdCB0byB0YWtlIGVmZmVjdCBidXQgeW91ciBBbGdvIHNlcnZlciB3aWxsIG5vdCByZWJvb3QgaXRzZWxmCiMgYXV0b21hdGljYWxseSB1bmxlc3MgeW91IGNoYW5nZSAnZW5hYmxlZCcgYmVsb3cgZnJvbSAnZmFsc2UnIHRvICd0cnVlJywgaW4KIyB3aGljaCBjYXNlIGEgcmVib290IHdpbGwgdGFrZSBwbGFjZSBpZiBuZWNlc3NhcnkgYXQgdGhlIHRpbWUgc3BlY2lmaWVkIChhcwojIEhIOk1NKSBpbiB0aGUgdGltZSB6b25lIG9mIHlvdXIgQWxnbyBzZXJ2ZXIuIFRoZSBkZWZhdWx0IHRpbWUgem9uZSBpcyBVVEMuCnVuYXR0ZW5kZWRfcmVib290OgogIGVuYWJsZWQ6IHRydWUKICB0aW1lOiAwNjowMAoKIyMjIEFkdmFuY2VkIHVzZXJzIG9ubHkgYmVsb3cgdGhpcyBsaW5lICMjIwoKIyBETlMgc2VydmVycyB3aGljaCB3aWxsIGJlIHVzZWQgaWYgJ2Ruc19lbmNyeXB0aW9uJyBpcyAndHJ1ZScuIE11bHRpcGxlCiMgcHJvdmlkZXJzIG1heSBiZSBzcGVjaWZpZWQsIGJ1dCBhdm9pZCBtaXhpbmcgcHJvdmlkZXJzIHRoYXQgZmlsdGVyIHJlc3VsdHMKIyAobGlrZSBDaXNjbykgd2l0aCB0aG9zZSB0aGF0IGRvbid0IChsaWtlIENsb3VkZmxhcmUpIG9yIHlvdSBjb3VsZCBnZXQKIyBpbmNvbnNpc3RlbnQgcmVzdWx0cy4gVGhlIGxpc3Qgb2YgYXZhaWxhYmxlIHB1YmxpYyBwcm92aWRlcnMgY2FuIGJlIGZvdW5kCiMgaGVyZToKIyBodHRwczovL2dpdGh1Yi5jb20vRE5TQ3J5cHQvZG5zY3J5cHQtcmVzb2x2ZXJzL2Jsb2IvbWFzdGVyL3YyL3B1YmxpYy1yZXNvbHZlcnMubWQKZG5zY3J5cHRfc2VydmVyczoKICBpcHY0OgogICAgLSBjbG91ZGZsYXJlCiMgICAtIGdvb2dsZQojICAgLSA8WW91ckN1c3RvbVNlcnZlcj4gICMgRS5nLiwgaWYgdXNpbmcgTmV4dEROUywgdGhpcyB3aWxsIGJlIHNvbWV0aGluZyBsaWtlIE5leHRETlMtYWJjMTIzLgogICAgICAgICAgICAgICAgICAgICAgICAgICMgWW91IG11c3QgYWxzbyBmaWxsIGluIGN1c3RvbV9zZXJ2ZXJfc3RhbXBzIGJlbG93LiBZb3UgbWF5IHNwZWNpZnkKICAgICAgICAgICAgICAgICAgICAgICAgICAjIG11bHRpcGxlIGN1c3RvbSBzZXJ2ZXJzLgogIGlwdjY6CiAgICAtIGNsb3VkZmxhcmUtaXB2NgoKY3VzdG9tX3NlcnZlcl9zdGFtcHM6CiMgWW91ckN1c3RvbVNlcnZlcjogJ3NkbnM6Ly8uLi4nCgojIEROUyBzZXJ2ZXJzIHdoaWNoIHdpbGwgYmUgdXNlZCBpZiAnZG5zX2VuY3J5cHRpb24nIGlzICdmYWxzZScuCiMgRmFsbGJhY2sgcmVzb2x2ZXJzIGZvciBzeXN0ZW1kLXJlc29sdmVkCiMgVGhlIGRlZmF1bHQgaXMgdG8gdXNlIENsb3VkZmxhcmUuCmRuc19zZXJ2ZXJzOgogIGlwdjQ6CiAgICAtIDEuMS4xLjEKICAgIC0gMS4wLjAuMQogIGlwdjY6CiAgICAtIDI2MDY6NDcwMDo0NzAwOjoxMTExCiAgICAtIDI2MDY6NDcwMDo0NzAwOjoxMDAxCgojIFN0b3JlIHRoZSBQS0kgaW4gYSByYW0gZGlzay4gRW5hYmxlZCBvbmx5IGlmIHN0b3JlX3BraSAocmV0YWluIHRoZSBQS0kpIGlzIHNldCB0byBmYWxzZQojIFN1cHBvcnRzIG9uIE1hY09TIGFuZCBMaW51eCBvbmx5IChpbmNsdWRpbmcgV2luZG93cyBTdWJzeXN0ZW0gZm9yIExpbnV4KQpwa2lfaW5fdG1wZnM6IHRydWUKCiMgU2V0IHRoaXMgdG8gJ3RydWUnIHdoZW4gcnVubmluZyAnLi9hbGdvIHVwZGF0ZS11c2VycycgaWYgeW91IHdhbnQgQUxMIHVzZXJzIHRvIGdldCBuZXcgY2VydHMsIG5vdCBqdXN0IG5ldyB1c2Vycy4Ka2V5c19jbGVhbl9hbGw6IGZhbHNlCgojIFN0cm9uZ1N3YW4gbG9nIGxldmVsCiMgaHR0cHM6Ly93aWtpLnN0cm9uZ3N3YW4ub3JnL3Byb2plY3RzL3N0cm9uZ3N3YW4vd2lraS9Mb2dnZXJDb25maWd1cmF0aW9uCnN0cm9uZ3N3YW5fbG9nX2xldmVsOiAyCgojIHJpZ2h0c291cmNlaXAgZm9yIGlwc2VjCiMgaXB2NApzdHJvbmdzd2FuX25ldHdvcms6IDEwLjQ4LjAuMC8xNgojIGlwdjYKc3Ryb25nc3dhbl9uZXR3b3JrX2lwdjY6ICcyMDAxOmRiODo0MTYwOjovNDgnCgojIElmIHlvdSdyZSBiZWhpbmQgTkFUIG9yIGEgZmlyZXdhbGwgYW5kIHlvdSB3YW50IHRvIHJlY2VpdmUgaW5jb21pbmcgY29ubmVjdGlvbnMgbG9uZyBhZnRlciBuZXR3b3JrIHRyYWZmaWMgaGFzIGdvbmUgc2lsZW50LgojIFRoaXMgb3B0aW9uIHdpbGwga2VlcCB0aGUgImNvbm5lY3Rpb24iIG9wZW4gaW4gdGhlIGV5ZXMgb2YgTkFULgojIFNlZTogaHR0cHM6Ly93d3cud2lyZWd1YXJkLmNvbS9xdWlja3N0YXJ0LyNuYXQtYW5kLWZpcmV3YWxsLXRyYXZlcnNhbC1wZXJzaXN0ZW5jZQp3aXJlZ3VhcmRfUGVyc2lzdGVudEtlZXBhbGl2ZTogMAoKIyBXaXJlR3VhcmQgbmV0d29yayBjb25maWd1cmF0aW9uCndpcmVndWFyZF9uZXR3b3JrX2lwdjQ6IDEwLjQ5LjAuMC8xNgp3aXJlZ3VhcmRfbmV0d29ya19pcHY2OiAyMDAxOmRiODphMTYwOjovNDgKCiMgUmFuZG9tbHkgZ2VuZXJhdGVkIElQIGFkZHJlc3MgZm9yIHRoZSBsb2NhbCBkbnMgcmVzb2x2ZXIKbG9jYWxfc2VydmljZV9pcDogInt7ICcxNzIuMTYuMC4xJyB8IGlwbWF0aCgxMDQ4NTczIHwgcmFuZG9tKHNlZWQ9YWxnb19zZXJ2ZXJfbmFtZSArIGFuc2libGVfZnFkbikpIH19Igpsb2NhbF9zZXJ2aWNlX2lwdjY6ICJ7eyAnZmQwMDo6MScgfCBpcG1hdGgoMTA0ODU3MyB8IHJhbmRvbShzZWVkPWFsZ29fc2VydmVyX25hbWUgKyBhbnNpYmxlX2ZxZG4pKSB9fSIKCiMgSGlkZSBzZW5zaXRpdmUgZGF0YQpub19sb2c6IHRydWUKCmNvbmdyYXRzOgogIGNvbW1vbjogfAogICAgIiMgICAgICAgICAgICAgICAgICAgICAgICAgIENvbmdyYXR1bGF0aW9ucyEgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyIKICAgICIjICAgICAgICAgICAgICAgICAgICAgWW91ciBBbGdvIHNlcnZlciBpcyBydW5uaW5nLiAgICAgICAgICAgICAgICAgICAgICMiCiAgICAiIyAgICBDb25maWcgZmlsZXMgYW5kIGNlcnRpZmljYXRlcyBhcmUgaW4gdGhlIC4vY29uZmlncy8gZGlyZWN0b3J5LiAgICAjIgogICAgIiMgICAgICAgICAgICAgIEdvIHRvIGh0dHBzOi8vd2hvZXIubmV0LyBhZnRlciBjb25uZWN0aW5nICAgICAgICAgICAgICAgIyIKICAgICIjICAgICAgICBhbmQgZW5zdXJlIHRoYXQgYWxsIHlvdXIgdHJhZmZpYyBwYXNzZXMgdGhyb3VnaCB0aGUgVlBOLiAgICAgICMiCiAgICAiIyAgICAgICAgICAgICAgICAgICAgIExvY2FsIEROUyByZXNvbHZlciB7eyBsb2NhbF9zZXJ2aWNlX2lwIH19e3sgJywgJyArIGxvY2FsX3NlcnZpY2VfaXB2NiBpZiBpcHY2X3N1cHBvcnQgZWxzZSAnJyB9fSAgICAgICAgICAgICAgICAgICAjIgogIHAxMl9wYXNzOiB8CiAgICAiIyAgICAgICAgVGhlIHAxMiBhbmQgU1NIIGtleXMgcGFzc3dvcmQgZm9yIG5ldyB1c2VycyBpcyB7eyBwMTJfZXhwb3J0X3Bhc3N3b3JkIH19ICAgICAgICMiCiAgY2Ffa2V5X3Bhc3M6IHwKICAgICIjICAgICAgICBUaGUgQ0Ega2V5IHBhc3N3b3JkIGlzIHt7IENBX3Bhc3N3b3JkfGRlZmF1bHQob21pdCkgfX0gICAgICAgIyIKICBzc2hfYWNjZXNzOiB8CiAgICAiIyAgICAgIFNoZWxsIGFjY2Vzczogc3NoIC1GIGNvbmZpZ3Mve3sgYW5zaWJsZV9zc2hfaG9zdHxkZWZhdWx0KG9taXQpIH19L3NzaF9jb25maWcge3sgYWxnb19zZXJ2ZXJfbmFtZSB9fSAgICAgICAgIyIKClNTSF9rZXlzOgogIGNvbW1lbnQ6IGFsZ29Ac3NoCiAgcHJpdmF0ZTogY29uZmlncy9hbGdvLnBlbQogIHByaXZhdGVfdG1wOiAvdG1wL2FsZ28tc3NoLnBlbQogIHB1YmxpYzogY29uZmlncy9hbGdvLnBlbS5wdWIKCmNsb3VkX3Byb3ZpZGVyczoKICBhenVyZToKICAgIHNpemU6IFN0YW5kYXJkX0IxUwogICAgb3NEaXNrOgogICAgICAjIFRoZSBzdG9yYWdlIGFjY291bnQgdHlwZSB0byB1c2UgZm9yIHRoZSBPUyBkaXNrLiBQb3NzaWJsZSB2YWx1ZXM6CiAgICAgICMgJ1N0YW5kYXJkX0xSUycsICdQcmVtaXVtX0xSUycsICdTdGFuZGFyZFNTRF9MUlMnLCAnVWx0cmFTU0RfTFJTJywKICAgICAgIyAnUHJlbWl1bV9aUlMnLCAnU3RhbmRhcmRTU0RfWlJTJywgJ1ByZW1pdW1WMl9MUlMnLgogICAgICB0eXBlOiBTdGFuZGFyZF9MUlMKICAgIGltYWdlOgogICAgICBwdWJsaXNoZXI6IENhbm9uaWNhbAogICAgICBvZmZlcjogMDAwMS1jb20tdWJ1bnR1LW1pbmltYWwtamFtbXktZGFpbHkKICAgICAgc2t1OiBtaW5pbWFsLTIyXzA0LWRhaWx5LWx0cwogICAgICB2ZXJzaW9uOiBsYXRlc3QKICBkaWdpdGFsb2NlYW46CiAgICBzaXplOiBzLTF2Y3B1LTFnYgogICAgaW1hZ2U6ICJ1YnVudHUtMjItMDQteDY0IgogIGVjMjoKICAgICMgQ2hhbmdlIHRoZSBlbmNyeXB0ZWQgZmxhZyB0byAiZmFsc2UiIHRvIGRpc2FibGUgQVdTIHZvbHVtZSBlbmNyeXB0aW9uLgogICAgZW5jcnlwdGVkOiB0cnVlCiAgICAjIFNldCB1c2VfZXhpc3RpbmdfZWlwIHRvICJ0cnVlIiBpZiB5b3Ugd2FudCB0byB1c2UgYSBwcmUtYWxsb2NhdGVkIEVsYXN0aWMgSVAKICAgICMgQWRkaXRpb25hbCBwcm9tcHQgd2lsbCBiZSByYWlzZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIElQIHRvIHVzZQogICAgdXNlX2V4aXN0aW5nX2VpcDogZmFsc2UKICAgIHNpemU6IHQyLm1pY3JvCiAgICBpbWFnZToKICAgICAgbmFtZTogInVidW50dS1qYW1teS0yMi4wNCIKICAgICAgYXJjaDogeDg2XzY0CiAgICAgIG93bmVyOiAiMDk5NzIwMTA5NDc3IgogICAgIyBDaGFuZ2UgaW5zdGFuY2VfbWFya2V0X3R5cGUgZnJvbSAib24tZGVtYW5kIiB0byAic3BvdCIgdG8gbGF1bmNoIGEgc3BvdAogICAgIyBpbnN0YW5jZS4gU2VlIGRlcGxveS1mcm9tLWFuc2libGUubWQgZm9yIHNwb3QncyBhZGRpdGlvbmFsIElBTSBwZXJtaXNzaW9uCiAgICBpbnN0YW5jZV9tYXJrZXRfdHlwZTogb24tZGVtYW5kCiAgZ2NlOgogICAgc2l6ZTogZTItbWljcm8KICAgIGltYWdlOiB1YnVudHUtMjIwNC1sdHMKICAgIGV4dGVybmFsX3N0YXRpY19pcDogZmFsc2UKICBsaWdodHNhaWw6CiAgICBzaXplOiBuYW5vXzJfMAogICAgaW1hZ2U6IHVidW50dV8yMl8wNAogIHNjYWxld2F5OgogICAgc2l6ZTogREVWMS1TCiAgICBpbWFnZTogVWJ1bnR1IDIyLjA0IEphbW15IEplbGx5ZmlzaAogICAgYXJjaDogeDg2XzY0CiAgaGV0em5lcjoKICAgIHNlcnZlcl90eXBlOiBjeDExCiAgICBpbWFnZTogdWJ1bnR1LTIyLjA0CiAgb3BlbnN0YWNrOgogICAgZmxhdm9yX3JhbTogIj49NDA5NiIKICAgIGltYWdlOiAiLS1PUzogVWJ1bnR1IDIyLjA0IChKYW1teSkgLURpc2s6IDEwR0IgLVJBTTogNTEyTUIiCiAgY2xvdWRzdGFjazoKICAgIHNpemU6IE1pY3JvCiAgICBpbWFnZTogTGludXggVWJ1bnR1IDIyLjA0IExUUyA2NC1iaXQKICAgIGRpc2s6IDEwCiAgdnVsdHI6CiAgICBvczogVWJ1bnR1IDIyLjA0IExUUyB4NjQKICAgIHNpemU6IDEwMjQgTUIgUkFNLDI1IEdCIFNTRCwxLjAwIFRCIEJXCiAgbGlub2RlOgogICAgdHlwZTogZzYtbmFub2RlLTEKICAgIGltYWdlOiBsaW5vZGUvdWJ1bnR1MjIuMDQKICBsb2NhbDoKCmZhaWxfaGludDoKICAtIFNvcnJ5LCBidXQgc29tZXRoaW5nIHdlbnQgd3JvbmchCiAgLSBQbGVhc2UgY2hlY2sgdGhlIHRyb3VibGVzaG9vdGluZyBndWlkZS4KICAtIGh0dHBzOi8vdHJhaWxvZmJpdHMuZ2l0aHViLmlvL2FsZ28vdHJvdWJsZXNob290aW5nLmh0bWwKCmJvb2xlYW5zX21hcDoKICBZOiB0cnVlCiAgeTogdHJ1ZQ==
runcmd:
  - git clone https://github.com/trailofbits/algo.git /opt/algo
  - cd /opt
  - export ENDPOINT=$(curl ifconfig.me)
  - chmod +x /opt/algo/install.sh
  - mv /opt/config.cfg /opt/algo/config.cfg
  - algo/install.sh
  - chown -R drew:drew /opt/algo
