data "cloudinit_config" "cloud-config" {
  gzip          = false
  base64_encode = false

  # Main cloud-config configuration file.
  part {
    filename     = "cloud-config.yaml"
    content      = base64decode("I2Nsb3VkLWNvbmZpZwpwYWNrYWdlX3VwZGF0ZTogdHJ1ZQpwYWNrYWdlczoKICAtIGJhc2gtY29tcGxldGlvbgogIC0gdW56aXAKdXNlcnM6CiAgLSBuYW1lOiBkcmV3CiAgICBzdWRvOiBbJ0FMTD0oQUxMKSBOT1BBU1NXRDpBTEwnXQogICAgZ3JvdXBzOiBbc3Vkbywgd3d3LWRhdGFdCiAgICBzaGVsbDogL2Jpbi9iYXNoCiAgICBsb2NrX3Bhc3N3ZDogZmFsc2UKICAgIHBhc3N3ZDogJDYkcm91bmRzPTQwOTYkblFFZWFIdHJqaVVseE9QaSRMUWxnaTBYQlI2dTQ2QUpGaFd4c1dCQks4WXFIYkdXWVdrV25HLllobWRZa2MvbE1pQWFjTXdRQWJaMFc3TW9zTEZleHVzaEhRcGZhMDVlRzdnc0wvMQogICAgc3NoLWF1dGhvcml6ZWQta2V5czoKICAgICAgLSBzc2gtcnNhIEFBQUFCM056YUMxeWMyRUFBQUFEQVFBQkFBQUJBUUNYM1pubm9qU3BxaTFSN0NXbVA3dVZGVTJmRWQydVM0UFlRcFdDMjNTY21ER1A3S0ZIZVRKZk1jNmVNYUFoYnhmSVh4MkNGZHNJaFA1VTU4QkZMbUF4a1VJTThsR25IZ2gxdU1FL2FPTVpva1pyRGhZbncwZWFhbVZPZzByZEtEL3VhVG84N0FTb3hwZjBYWW5ycWNyWWhGSVFvZHhqc0NDOHBDVTVFZ2poOVFEZ0hzbmlKNXZXRWt4WkdQUTRTWElqNHR4aDh1WE1JMG1oNTdCV0pSSzB6SklEelpDeHVidHJPcFdvUW5WdmcvWlYrVGhneTBQOW03ZThPSGJhTTNVLzdwNERCZDFNWjk1ak53amVmTWVENWhSNDZUMzVya1I5dy9lYkVJS2hHanowVUIyeVJVWlBPUHFCelZmaXhZQTZnZmQ1YzFBaGpsdUN5Q3FoTEVNZCBHZW5lcmF0ZWQtYnktTm92YQogIC0gbmFtZTogd29yZHByZXNzCiAgICBzdWRvOiBmYWxzZQogICAgZ3JvdXBzOiBbd3d3LWRhdGFdCiAgICBzaGVsbDogL2Jpbi9iYXNoCiAgICBsb2NrX3Bhc3N3ZDogZmFsc2UKd3JpdGVfZmlsZXM6CiAgLSBwYXRoOiAiL2V0Yy9lbnZpcm9ubWVudCIKICAgIGNvbnRlbnQ6ICJaWGh3YjNKMElGQkJVMU5mVFZsVFVVeGZVazlQVkQwS1pYaHdiM0owSUZCQlUxTmZUVmxUVVV4ZlYxQmZWVk5GVWowS1pYaHdiM0owSUZCQlUxTmZWMDlTUkZCU1JWTlRQUW89IgogICAgZW5jb2Rpbmc6IGJhc2U2NAogICAgYXBwZW5kOiB0cnVlCiAgLSBwYXRoOiAiL2V0Yy9zc2gvc3NoZF9jb25maWciCiAgICBjb250ZW50OiAiVUc5eWRDQXhNelUxQ2xCbGNtMXBkRkp2YjNSTWIyZHBiaUJ1YndwUVlYTnpkMjl5WkVGMWRHaGxiblJwWTJGMGFXOXVJSGxsY3dvPSIKICAgIGFwcGVuZDogdHJ1ZQogICAgZW5jb2Rpbmc6IGJhc2U2NAogIC0gcGF0aDogIi9ldGMvbGVtcC1pbnN0YWxsLnNoIgogICAgZW5jb2Rpbmc6IGJhc2U2NAogICAgcGVybWlzc2lvbnM6ICI3MDAiCiAgICBjb250ZW50OiBJeUV2WW1sdUwySmhjMmdLQ25ObGRDQXRaUW9LUkU5TlFVbE9QU0prWldaaGRXeDBJZ29LSXlCSmJuTjBZV3hzSUhCaFkydGhaMlZ6Q21Gd2RDQjFjR1JoZEdVZ2ZId2dkSEoxWlFwaGNIUWdhVzV6ZEdGc2JDQXRlU0J1WjJsdWVDQnRZWEpwWVdSaUxYTmxjblpsY2lCd2FIQXRabkJ0SUhCb2NDMXRlWE54YkNCd2FIQXRZM1Z5YkNCd2FIQXRaMlFnY0dod0xXbHVkR3dnY0dod0xXMWljM1J5YVc1bklIQm9jQzF6YjJGd0lIQm9jQzE0Yld3Z2NHaHdMWGh0YkhKd1l5QndhSEF0ZW1sd0Nnb2pJRU52Ym1acFozVnlaU0J0WVhKcFlXUmlDbVJsWW1OdmJtWXRjMlYwTFhObGJHVmpkR2x2Ym5NZ1BEdzhJQ0p0ZVhOeGJDMXpaWEoyWlhJZ2JYbHpjV3d0YzJWeWRtVnlMM0p2YjNSZmNHRnpjM2R2Y21RZ2NHRnpjM2R2Y21RZ0pIdFFRVk5UWDAxWlUxRk1YMUpQVDFSOUlpQWpJRzVsZHlCd1lYTnpkMjl5WkNCbWIzSWdkR2hsSUUxNVUxRk1JSEp2YjNRZ2RYTmxjZ3BrWldKamIyNW1MWE5sZEMxelpXeGxZM1JwYjI1eklEdzhQQ0FpYlhsemNXd3RjMlZ5ZG1WeUlHMTVjM0ZzTFhObGNuWmxjaTl5YjI5MFgzQmhjM04zYjNKa1gyRm5ZV2x1SUhCaGMzTjNiM0prSUNSN1VFRlRVMTlOV1ZOUlRGOVNUMDlVZlNJZ0l5QnlaWEJsWVhRZ2NHRnpjM2R2Y21RZ1ptOXlJSFJvWlNCTmVWTlJUQ0J5YjI5MElIVnpaWElLQ20xNWMzRnNJQzB0ZFhObGNqMXliMjkwSUMwdGNHRnpjM2R2Y21ROUpIdFFRVk5UWDAxWlUxRk1YMUpQVDFSOUlEdzhJRVZQUmsxWlUxRk1VMFZEVlZKRkNrUkZURVZVUlNCR1VrOU5JRzE1YzNGc0xuVnpaWElnVjBoRlVrVWdWWE5sY2owbmNtOXZkQ2NnUVU1RUlFaHZjM1FnVGs5VUlFbE9JQ2duYkc5allXeG9iM04wSnl3Z0p6RXlOeTR3TGpBdU1TY3NJQ2M2T2pFbktUc0tSRVZNUlZSRklFWlNUMDBnYlhsemNXd3VkWE5sY2lCWFNFVlNSU0JWYzJWeVBTY25Pd3BFUlV4RlZFVWdSbEpQVFNCdGVYTnhiQzVrWWlCWFNFVlNSU0JFWWowbmRHVnpkQ2NnVDFJZ1JHSTlKM1JsYzNSZkpTYzdDa1pNVlZOSUlGQlNTVlpKVEVWSFJWTTdDa1ZQUmsxWlUxRk1VMFZEVlZKRkNtMTVjM0ZzSUMxMUlISnZiM1FnTFhBZ0xXVWdJa05TUlVGVVJTQlZVMFZTSUNkM2NGOTFjMlZ5SjBBbmJHOWpZV3hvYjNOMEp5QkpSRVZPVkVsR1NVVkVJRUpaSUNja2UxQkJVMU5mVFZsVFVVeGZWMUJmVlZORlVuMG5PeUlLQ2lNZ1EyOXVabWxuZFhKbElHNW5hVzU0Q20xclpHbHlJQzkyWVhJdmQzZDNMeVJFVDAxQlNVNGdDbU5vYjNkdUlDMVNJSGR2Y21Sd2NtVnpjenAzYjNKa2NISmxjM01nTDNaaGNpOTNkM2N2SkVSUFRVRkpUZ3AwYjNWamFDQXZaWFJqTDI1bmFXNTRMM05wZEdWekxXRjJZV2xzWVdKc1pTOGtSRTlOUVVsT0NtVmphRzhnSWlNZ1oyVnVaWEpoZEdWa0lESXdNak10TURVdE1qa3NJRTF2ZW1sc2JHRWdSM1ZwWkdWc2FXNWxJSFkxTGpjc0lHNW5hVzU0SURFdU1UY3VOeXdnVDNCbGJsTlRUQ0F4TGpFdU1Xc3NJR2x1ZEdWeWJXVmthV0YwWlNCamIyNW1hV2QxY21GMGFXOXVDaU1nYUhSMGNITTZMeTl6YzJ3dFkyOXVabWxuTG0xdmVtbHNiR0V1YjNKbkx5TnpaWEoyWlhJOWJtZHBibmdtZG1WeWMybHZiajB4TGpFM0xqY21ZMjl1Wm1sblBXbHVkR1Z5YldWa2FXRjBaU1p2Y0dWdWMzTnNQVEV1TVM0eGF5Wm5kV2xrWld4cGJtVTlOUzQzQ25ObGNuWmxjaUI3Q2lBZ0lDQnNhWE4wWlc0Z09EQTdDaUFnSUNCc2FYTjBaVzRnV3pvNlhUbzRNRHNLQ2lBZ0lDQnliMjkwSUM5MllYSXZkM2QzTHlSRVQwMUJTVTQ3Q2lBZ0lDQnBibVJsZUNCcGJtUmxlQzV3YUhBZ2FXNWtaWGd1YUhSdGJDQnBibVJsZUM1b2RHMDdDZ29nSUNBZ2MyVnlkbVZ5WDI1aGJXVWdKRVJQVFVGSlRqc0tDaUFnSUNCc2IyTmhkR2x2YmlBdklIc0tJQ0FnSUNBZ0lDQWpJSFJ5ZVY5bWFXeGxjeUFrZFhKcElDUjFjbWt2SUQwME1EUTdDaUFnSUNBZ0lDQWdkSEo1WDJacGJHVnpJQ1IxY21rZ0pIVnlhUzhnTDJsdVpHVjRMbkJvY0NScGMxOWhjbWR6SkdGeVozTTdDaUFnSUNCOUNnb2dJQ0FnYkc5allYUnBiMjRnZmlCY0xuQm9jQ1FnZXdvZ0lDQWdJQ0FnSUdsdVkyeDFaR1VnYzI1cGNIQmxkSE12Wm1GemRHTm5hUzF3YUhBdVkyOXVaanNLSUNBZ0lDQWdJQ0JtWVhOMFkyZHBYM0JoYzNNZ2RXNXBlRG92ZG1GeUwzSjFiaTl3YUhBdmNHaHdOeTQwTFdad2JTNXpiMk5yT3dvZ0lDQWdmUW9LSUNBZ0lDTWdSR2xuYVhSaGJHOWpaV0Z1SUhkdmNtUndjbVZ6Y3dvZ0lDQWdiRzlqWVhScGIyNGdQU0F2Wm1GMmFXTnZiaTVwWTI4Z2V5QnNiMmRmYm05MFgyWnZkVzVrSUc5bVpqc2dZV05qWlhOelgyeHZaeUJ2Wm1ZN0lIMEtJQ0FnSUd4dlkyRjBhVzl1SUQwZ0wzSnZZbTkwY3k1MGVIUWdleUJzYjJkZmJtOTBYMlp2ZFc1a0lHOW1aanNnWVdOalpYTnpYMnh2WnlCdlptWTdJR0ZzYkc5M0lHRnNiRHNnZlFvZ0lDQWdiRzlqWVhScGIyNGdmaW9nWEM0b1kzTnpmR2RwWm54cFkyOThhbkJsWjN4cWNHZDhhbk44Y0c1bktTUWdld29nSUNBZ0lDQWdJR1Y0Y0dseVpYTWdiV0Y0T3dvZ0lDQWdJQ0FnSUd4dloxOXViM1JmWm05MWJtUWdiMlptT3dvZ0lDQWdmUXA5Q2dvS2MyVnlkbVZ5SUhzS0lDQWdJR3hwYzNSbGJpQTBORE1nYzNOc0lHaDBkSEF5T3dvZ0lDQWdiR2x6ZEdWdUlGczZPbDA2TkRReklITnpiQ0JvZEhSd01qc0tDaUFnSUNCemMyeGZZMlZ5ZEdsbWFXTmhkR1VnTDNCaGRHZ3ZkRzh2YzJsbmJtVmtYMk5sY25SZmNHeDFjMTlwYm5SbGNtMWxaR2xoZEdWek93b2dJQ0FnYzNOc1gyTmxjblJwWm1sallYUmxYMnRsZVNBdmNHRjBhQzkwYnk5d2NtbDJZWFJsWDJ0bGVUc0tJQ0FnSUhOemJGOXpaWE56YVc5dVgzUnBiV1Z2ZFhRZ01XUTdDaUFnSUNCemMyeGZjMlZ6YzJsdmJsOWpZV05vWlNCemFHRnlaV1E2VFc5NlUxTk1PakV3YlRzZ0lDTWdZV0p2ZFhRZ05EQXdNREFnYzJWemMybHZibk1LSUNBZ0lITnpiRjl6WlhOemFXOXVYM1JwWTJ0bGRITWdiMlptT3dvS0lDQWdJQ01nWTNWeWJDQm9kSFJ3Y3pvdkwzTnpiQzFqYjI1bWFXY3ViVzk2YVd4c1lTNXZjbWN2Wm1aa2FHVXlNRFE0TG5SNGRDQStJQzl3WVhSb0wzUnZMMlJvY0dGeVlXMEtJQ0FnSUhOemJGOWthSEJoY21GdElDOXdZWFJvTDNSdkwyUm9jR0Z5WVcwN0Nnb2dJQ0FnSXlCcGJuUmxjbTFsWkdsaGRHVWdZMjl1Wm1sbmRYSmhkR2x2YmdvZ0lDQWdjM05zWDNCeWIzUnZZMjlzY3lCVVRGTjJNUzR5SUZSTVUzWXhMak03Q2lBZ0lDQnpjMnhmWTJsd2FHVnljeUJGUTBSSVJTMUZRMFJUUVMxQlJWTXhNamd0UjBOTkxWTklRVEkxTmpwRlEwUklSUzFTVTBFdFFVVlRNVEk0TFVkRFRTMVRTRUV5TlRZNlJVTkVTRVV0UlVORVUwRXRRVVZUTWpVMkxVZERUUzFUU0VFek9EUTZSVU5FU0VVdFVsTkJMVUZGVXpJMU5pMUhRMDB0VTBoQk16ZzBPa1ZEUkVoRkxVVkRSRk5CTFVOSVFVTklRVEl3TFZCUFRGa3hNekExT2tWRFJFaEZMVkpUUVMxRFNFRkRTRUV5TUMxUVQweFpNVE13TlRwRVNFVXRVbE5CTFVGRlV6RXlPQzFIUTAwdFUwaEJNalUyT2tSSVJTMVNVMEV0UVVWVE1qVTJMVWREVFMxVFNFRXpPRFE2UkVoRkxWSlRRUzFEU0VGRFNFRXlNQzFRVDB4Wk1UTXdOVHNLSUNBZ0lITnpiRjl3Y21WbVpYSmZjMlZ5ZG1WeVgyTnBjR2hsY25NZ2IyWm1Pd29LSUNBZ0lDTWdTRk5VVXlBb2JtZDRYMmgwZEhCZmFHVmhaR1Z5YzE5dGIyUjFiR1VnYVhNZ2NtVnhkV2x5WldRcElDZzJNekEzTWpBd01DQnpaV052Ym1SektRb2dJQ0FnWVdSa1gyaGxZV1JsY2lCVGRISnBZM1F0VkhKaGJuTndiM0owTFZObFkzVnlhWFI1SUNKdFlYZ3RZV2RsUFRZek1EY3lNREF3SWlCaGJIZGhlWE03Q2dvZ0lDQWdJeUJQUTFOUUlITjBZWEJzYVc1bkNpQWdJQ0J6YzJ4ZmMzUmhjR3hwYm1jZ2IyNDdDaUFnSUNCemMyeGZjM1JoY0d4cGJtZGZkbVZ5YVdaNUlHOXVPd29LSUNBZ0lDTWdkbVZ5YVdaNUlHTm9ZV2x1SUc5bUlIUnlkWE4wSUc5bUlFOURVMUFnY21WemNHOXVjMlVnZFhOcGJtY2dVbTl2ZENCRFFTQmhibVFnU1c1MFpYSnRaV1JwWVhSbElHTmxjblJ6Q2lBZ0lDQnpjMnhmZEhKMWMzUmxaRjlqWlhKMGFXWnBZMkYwWlNBdmNHRjBhQzkwYnk5eWIyOTBYME5CWDJObGNuUmZjR3gxYzE5cGJuUmxjbTFsWkdsaGRHVnpPd29LSUNBZ0lDTWdjbVZ3YkdGalpTQjNhWFJvSUhSb1pTQkpVQ0JoWkdSeVpYTnpJRzltSUhsdmRYSWdjbVZ6YjJ4MlpYSUtJQ0FnSUhKbGMyOXNkbVZ5SURFeU55NHdMakF1TVRzS2ZTSWdQaUF2WlhSakwyNW5hVzU0TDNOcGRHVnpMV0YyWVdsc1lXSnNaUzhrUkU5TlFVbE9DbXh1SUMxeklDOWxkR012Ym1kcGJuZ3ZjMmwwWlhNdFlYWmhhV3hoWW14bEx5UkVUMDFCU1U0Z0wyVjBZeTl1WjJsdWVDOXphWFJsY3kxbGJtRmliR1ZrTHlSRVQwMUJTVTRnZkh3Z2RISjFaU0FqVkU5RVR5QnRZV3RsSUhOMWNtVWdkR2hwY3lCcGMyNG5kQ0JoSUdKaFpDQnBaR1ZoQ201bmFXNTRJQzEwQ25ONWMzUmxiV04wYkNCeVpXeHZZV1FnYm1kcGJuZ0tDaU1nU1c1emRHRnNiQ0IzYjNKa2NISmxjM01LY20wZ0xYSm1JQzkyWVhJdmQzZDNMMmgwYld3dkxpb0tkMmRsZENBdFVDQXZhRzl0WlM5M2IzSmtjSEpsYzNNZ2FIUjBjSE02THk5M2IzSmtjSEpsYzNNdWIzSm5MMnhoZEdWemRDNTZhWEFLZFc1NmFYQWdMMmh2YldVdmQyOXlaSEJ5WlhOekwyeGhkR1Z6ZEM1NmFYQWdMV1FnTDNKdmIzUXZDbTEySUM5eWIyOTBMM2R2Y21Sd2NtVnpjeTh1S2lBdmRtRnlMM2QzZHk4a1JFOU5RVWxPTHdvS0l5QkdhWGdnWm05c1pHVnlJSEJsY20xcGMzTnBiMjV6Q21Ob2JXOWtJRGMxTlNBdFVpQXZkbUZ5TDNkM2R5OEtZMmh2ZDI0Z2QyOXlaSEJ5WlhOek9uZDNkeTFrWVhSaElDMVNJQzkyWVhJdmQzZDNMdz09CnJ1bmNtZDoKICAtIGNwIC9ldGMvc2tlbC8uYmFzaHJjIC9ob21lL2RyZXcvLnByb2ZpbGUKICAtIHNlZCAtaSAncy8jZm9yY2VfY29sb3JfcHJvbXB0PXllcy9mb3JjZV9jb2xvcl9wcm9tcHQ9eWVzL2cnIC9ob21lL2RyZXcvLnByb2ZpbGUKICAtIGNob3duIGRyZXc6ZHJldyAvaG9tZS9kcmV3Ly5wcm9maWxlCiAgLSBzeXN0ZW1jdGwgcmVzdGFydCBzc2gKICAtIC9ldGMvbGVtcC1pbnN0YWxsLnNoCg==")
    content_type = "text/cloud-config"
  }
}

output "cloud-config" {
  value = data.cloudinit_config.cloud-config.rendered
}