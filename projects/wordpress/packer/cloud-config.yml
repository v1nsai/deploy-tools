#cloud-config
package_update: true
packages:
- python3
- python3-pip
- python3-venv
ssh:
  allow-pw: true
  authorized-keys: []
  install-server: true
users:
- name: localadmin
  sudo: ['ALL=(ALL) NOPASSWD:ALL']
  groups: [sudo, www-data]
  shell: /bin/bash
  lock_passwd: false
  passwd: $6$rounds=4096$nQEeaHtrjiUlxOPi$LQlgi0XBR6u46AJFhWxsWBBK8YqHbGWYWkWnG.YhmdYkc/lMiAacMwQAbZ0W7MosLFexushHQpfa05eG7gsL/1
  ssh_authorized_keys:
  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCX3ZnnojSpqi1R7CWmP7uVFU2fEd2uS4PYQpWC23ScmDGP7KFHeTJfMc6eMaAhbxfIXx2CFdsIhP5U58BFLmAxkUIM8lGnHgh1uME/aOMZokZrDhYnw0eaamVOg0rdKD/uaTo87ASoxpf0XYnrqcrYhFIQodxjsCC8pCU5Egjh9QDgHsniJ5vWEkxZGPQ4SXIj4txh8uXMI0mh57BWJRK0zJIDzZCxubtrOpWoQnVvg/ZV+Thgy0P9m7e8OHbaM3U/7p4DBd1MZ95jNwjefMeD5hR46T35rkR9w/ebEIKhGjz0UB2yRUZPOPqBzVfixYA6gfd5c1AhjluCyCqhLEMd Generated-by-Nova
- name: wordpress
  groups: [www-data]
  shell: /bin/bash
  lock_passwd: false
write_files:
  - path: /etc/ssh/sshd_config
    content: |
      PermitRootLogin no
    append: true
  - path: /home/localadmin/.ssh/config
    content: |
      Host 127.0.0.1 localhost
        StrictHostKeyChecking no

      Host github.com
        User git
        HostName github.com
        IdentityFile ~/.ssh/id_rsa
        StrictHostKeyChecking no
    owner: localadmin:localadmin
    permissions: '0600'
    defer: true
  - path: /home/wordpress/.ssh/config
    content: |
      Host 127.0.0.1 localhost
        StrictHostKeyChecking no

      Host github.com
        User git
        HostName github.com
        IdentityFile ~/.ssh/id_rsa
        StrictHostKeyChecking no
    owner: wordpress:wordpress
    permissions: '0600'
    defer: true
  - path: /opt/wp-deploy/install.sh
    content: |
      IyEvYmluL2Jhc2gKCnNldCAtZQoKVVNFUkRPTUFJTj1mYWxzZQppZiBbWyAkRE9NQUlOIF1dOyB0aGVuCiAgICBlY2hvICJTZXR0aW5nIERPTUFJTi4uLiIKICAgIFVTRVJET01BSU49dHJ1ZQplbHNlCiAgICBlY2hvICJET01BSU4gbm90IHNldCwgZGVmYXVsdGluZyB0byBwdWJsaWMgSVAiCiAgICBET01BSU49IiQoY3VybCAtcyBodHRwOi8vd2hhdGlzbXlpcC5ha2FtYWkuY29tLykiCmZpCgojIHN1ZG8gY2htb2QgNzQ0IC1SIC9vcHQvd3AtZGVwbG95CnN1ZG8gY2hvd24gLVIgbG9jYWxhZG1pbjpsb2NhbGFkbWluIC9vcHQvd3AtZGVwbG95CmNkIC9vcHQvd3AtZGVwbG95CgojIEluc3RhbGwgZGVwZW5kZW5jaWVzCmN1cmwgLXNMIGh0dHBzOi8vcm9vdHMuaW8vdHJlbGxpcy9jbGkvZ2V0IHwgc3VkbyBiYXNoCnB5dGhvbjMgLW0gcGlwIGluc3RhbGwgdmlydHVhbGVudiBhbnNpYmxlCi9ob21lL2xvY2FsYWRtaW4vLmxvY2FsL2Jpbi9hbnNpYmxlLWdhbGF4eSBpbnN0YWxsIGt3b29kc29uLnllZGl0CnN1ZG8gd2dldCBodHRwczovL2dpdGh1Yi5jb20vbWlrZWZhcmFoL3lxL3JlbGVhc2VzL2xhdGVzdC9kb3dubG9hZC95cV9saW51eF9hbWQ2NCAtTyAvdXNyL2Jpbi95cSAmJlwKICAgIHN1ZG8gY2htb2QgK3ggL3Vzci9iaW4veXEKCiMgQ29uZmlndXJlIHVzZXJzCnRyZWxsaXMgbmV3IC0tbmFtZSAkRE9NQUlOIC0taG9zdCAkRE9NQUlOICRET01BSU4gfHwgZWNobyAiRG9tYWluIGFscmVhZHkgZXhpc3RzLCBza2lwcGluZyB0cmVsbGlzIG5ldyIKeXEgLWkgJy53ZWJfdXNlciA9ICJ3b3JkcHJlc3MiJyAkRE9NQUlOL3RyZWxsaXMvZ3JvdXBfdmFycy9hbGwvdXNlcnMueW1sCnlxIC1pICcuYWRtaW5fdXNlciA9ICJsb2NhbGFkbWluIicgJERPTUFJTi90cmVsbGlzL2dyb3VwX3ZhcnMvYWxsL3VzZXJzLnltbAoKIyBDb25maWd1cmUgd29yZHByZXNzX3NpdGVzCnNlZCAtaSAncy9leGFtcGxlXC5jb20vJyRET01BSU4nL2cnICRET01BSU4vdHJlbGxpcy9ncm91cF92YXJzL3Byb2R1Y3Rpb24vd29yZHByZXNzX3NpdGVzLnltbAp5cSAtaSAnLndvcmRwcmVzc19zaXRlcy4iJyRET01BSU4nIi5yZXBvID0gImdpdEBnaXRodWIuY29tOnJvb3RzL2JlZHJvY2suZ2l0IicgJERPTUFJTi90cmVsbGlzL2dyb3VwX3ZhcnMvcHJvZHVjdGlvbi93b3JkcHJlc3Nfc2l0ZXMueW1sCnNlZCAtaSAnL3JlcG9fc3VidHJlZV9wYXRoLyBzLy4qLy8nICRET01BSU4vdHJlbGxpcy9ncm91cF92YXJzL3Byb2R1Y3Rpb24vd29yZHByZXNzX3NpdGVzLnltbAoKIyBTU0wgY29uZmlnCmNhc2UgJFNTTF9QUk9WSVNJT05FUiBpbgogICAgImxldHNlbmNyeXB0IikKICAgICAgICBlY2hvICJTZXR0aW5nIHVwIGxldHNlbmNyeXB0Li4uIgogICAgICAgIHlxIC1pICcud29yZHByZXNzX3NpdGVzLiInJERPTUFJTiciLnNzbC5lbmFibGVkID0gdHJ1ZScgJERPTUFJTi90cmVsbGlzL2dyb3VwX3ZhcnMvcHJvZHVjdGlvbi93b3JkcHJlc3Nfc2l0ZXMueW1sCiAgICAgICAgeXEgLWkgJy53b3JkcHJlc3Nfc2l0ZXMuIickRE9NQUlOJyIuc3NsLnByb3ZpZGVyID0gImxldHNlbmNyeXB0IicgJERPTUFJTi90cmVsbGlzL2dyb3VwX3ZhcnMvcHJvZHVjdGlvbi93b3JkcHJlc3Nfc2l0ZXMueW1sCiAgICAgICAgOzsKICAgICJtYW51YWwiKQogICAgICAgIGVjaG8gIlNldHRpbmcgdXAgbWFudWFsIFNTTC4uLiIKICAgICAgICBzZWQgLWkgJy9zc2w6LywvbGV0c2VuY3J5cHQvY1wgICAgc3NsOlxuICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgcHJvdmlkZXI6IG1hbnVhbFxuICAgICAgY2VydDogL2V0Yy9zc2wuY3J0XG4gICAgICBrZXk6IC9ldGMvc3NsLmtleScgJERPTUFJTi90cmVsbGlzL2dyb3VwX3ZhcnMvcHJvZHVjdGlvbi93b3JkcHJlc3Nfc2l0ZXMueW1sCiAgICAgICAgOzsKICAgICJzZWxmLXNpZ25lZCIpCiAgICAgICAgZWNobyAiU2V0dGluZyB1cCBzZWxmLXNpZ25lZCBTU0wuLi4iCiAgICAgICAgeXEgLWkgJy53b3JkcHJlc3Nfc2l0ZXMuIickRE9NQUlOJyIuc3NsLmVuYWJsZWQgPSB0cnVlJyAkRE9NQUlOL3RyZWxsaXMvZ3JvdXBfdmFycy9wcm9kdWN0aW9uL3dvcmRwcmVzc19zaXRlcy55bWwKICAgICAgICB5cSAtaSAnLndvcmRwcmVzc19zaXRlcy4iJyRET01BSU4nIi5zc2wucHJvdmlkZXIgPSAic2VsZi1zaWduZWQiJyAkRE9NQUlOL3RyZWxsaXMvZ3JvdXBfdmFycy9wcm9kdWN0aW9uL3dvcmRwcmVzc19zaXRlcy55bWwKICAgICAgICA7OwogICAgKikKICAgICAgICBlY2hvICJTU0xfUFJPVklTSU9ORVIgbm90IHNldCwgZGVmYXVsdGluZyB0byBzZWxmLXNpZ25lZCIKICAgICAgICB5cSAtaSAnLndvcmRwcmVzc19zaXRlcy4iJyRET01BSU4nIi5zc2wuZW5hYmxlZCA9IHRydWUnICRET01BSU4vdHJlbGxpcy9ncm91cF92YXJzL3Byb2R1Y3Rpb24vd29yZHByZXNzX3NpdGVzLnltbAogICAgICAgIHlxIC1pICcud29yZHByZXNzX3NpdGVzLiInJERPTUFJTiciLnNzbC5wcm92aWRlciA9ICJzZWxmLXNpZ25lZCInICRET01BSU4vdHJlbGxpcy9ncm91cF92YXJzL3Byb2R1Y3Rpb24vd29yZHByZXNzX3NpdGVzLnltbAogICAgOzsKZXNhYwoKIyBDb25maWd1cmUgaG9zdHMKc2VkIC1pICdzL3lvdXJfc2VydmVyX2hvc3RuYW1lLzEyNy4wLjAuMS9nJyAkRE9NQUlOL3RyZWxsaXMvaG9zdHMvcHJvZHVjdGlvbgoKIyBDb25maWd1cmUgc3NoIHVzZXIKc3VkbyBjYXQgL2hvbWUvbG9jYWxhZG1pbi8uc3NoL2lkX3JzYS5wdWIgPj4gL2hvbWUvbG9jYWxhZG1pbi8uc3NoL2F1dGhvcml6ZWRfa2V5cwpzdWRvIGNhdCAvaG9tZS9sb2NhbGFkbWluLy5zc2gvaWRfcnNhLnB1YiB8IHN1ZG8gdGVlIC1hIC9ob21lL3dvcmRwcmVzcy8uc3NoL2F1dGhvcml6ZWRfa2V5cwpzdWRvIGNwIC1mIC9ob21lL2xvY2FsYWRtaW4vLnNzaC9pZF9yc2EgL2hvbWUvd29yZHByZXNzLy5zc2gvaWRfcnNhCnN1ZG8gY3AgLWYgL2hvbWUvbG9jYWxhZG1pbi8uc3NoL2lkX3JzYS5wdWIgL2hvbWUvd29yZHByZXNzLy5zc2gvaWRfcnNhLnB1YgpzdWRvIGNob3duIC1SIHdvcmRwcmVzczp3b3JkcHJlc3MgL2hvbWUvd29yZHByZXNzLy5zc2gKCiMgQ29uZmlndXJlIGFjY2VzcwppZiBbICRVU0VSRE9NQUlOID0gdHJ1ZV0gOyB0aGVuCiAgICBlY2hvICdsZXRzZW5jcnlwdF9jb250YWN0X2VtYWlsczogWyAibWFpbEAnJERPTUFJTiciIF0nID4+ICRET01BSU4vdHJlbGxpcy9ncm91cF92YXJzL2FsbC9tYWluLnltbAplbHNlCiAgICBlY2hvICdsZXRzZW5jcnlwdF9jb250YWN0X2VtYWlsczogWyAibWFpbEB5b3VyZG9tYWluLmNvbSIgXScgPj4gJERPTUFJTi90cmVsbGlzL2dyb3VwX3ZhcnMvYWxsL21haW4ueW1sCmZpCmVjaG8gJ2lwX3doaXRlbGlzdDogWyAiMC4wLjAuMCIgXScgPj4gJERPTUFJTi90cmVsbGlzL2dyb3VwX3ZhcnMvYWxsL21haW4ueW1sCmVjaG8gJ3NzaF9jbGllbnRfaXBfbG9va3VwOiBmYWxzZScgPj4gJERPTUFJTi90cmVsbGlzL2dyb3VwX3ZhcnMvYWxsL21haW4ueW1sCgojIFJhaXNlIGlwaWZ5IHRpbWVvdXQKc2VkIC1pICdzL2lwaWZ5X2ZhY3RzOi9pcGlmeV9mYWN0czpcbiAgICAgICAgdGltZW91dDogNjAvZycgJERPTUFJTi90cmVsbGlzL3JvbGVzL2NvbW1vbi90YXNrcy9tYWluLnltbAoKIyBQcm92aXNpb24gYW5kIGRlcGxveSB0byBsb2NhbGhvc3QKY2QgJERPTUFJTi90cmVsbGlzCnRyZWxsaXMgcHJvdmlzaW9uIHByb2R1Y3Rpb24KdHJlbGxpcyBkZXBsb3kgcHJvZHVjdGlvbg==
    owner: localadmin:localadmin
    permissions: '0777'
    encoding: base64
    defer: true
  - path: /home/localadmin/.ssh/id_rsa
    content: |
      LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBb1p3WEJEeWJDdW5qOWVnTlVxSGh6N1E4STE4VWdTaEcyYWM3OXRjTUMvQk5iMHZkCjhzUTdUNnBQZk8reGNST3Z5ZHFzTUNpWnd0eU05eWdaSFFqODZKSzRwOWtoMHNvRms2aFBERHQwTCs3NFAyUnoKYjYrVWFuSmthSnh2eDVQcnJLTWNzZWs3THRvQnUyY3lhcStsdVZxOWhGbE1jVDB5ZjNianpFYjJLNGpocitHaQpNcXhPeFZYdTNjeEpzVzh6SnNVbjAxRlQrVEluSzRNNjhNajQ5VS9LR0wrT0plaWFDRG1uUEVLc3ltZW9WUzkrCnRPTERBUHVGTHNrZ21pN0hMUmdSNW01anRKdERHN0srd0t3QnBtSHdHTlZoYmlvMU53V0lHeXI1OW8rZXl6K2oKdFhkN1lNc0FoRTBDTThtYVFPMjd3Qk8yaC9EbEF6c3VHUExiZVFJREFRQUJBb0lCQUJ6LzFXRjlQcFVHdzFFdApBcmNCTlhQLzg0cWxWUmlZRVo2YzA3WEhnUEhqZlFHcnEzZ1Vuay85VDZZcm5MdWR2TDJMNzduMGp5TFlVTE5KCkRyaVhGRXJuaVJzVmEyeFh0QWg2K3pSR3R1S2pEd2pSRGFYTTYrVHVBZmFEbTh0RVQ5WDZydnQ5enBEcHJjWGoKRHJqMks5Ykc0WnNPS3hsbTBkanRqSkxyYU9FR3RkbzB3MnRZZHNaQ21nYSs3Q0JodHJTQmpJQ0RPVStOSU12Nwo5UlRQeVB6eTcvRVlqemJRb0hlZE1EMFhUMUNqYnUyekllZGpScmhkcVVMb2lUUGhvaElXVFF0L1NUSDBFZ1c4CnNHNHRQd281cm5GdW9vbGVRaHg5Z2ZiaTdjOG5LeTFZaWpDQkJvM0tYR2tTbHVlY3NQci8zSnNTQ2I2dkh3TmgKNVc4UlZ3RUNnWUVBMTNvU3Ezd0IzdThwekhJdXp2elJBeSsyaVBQcjFWU2crQzZnQ1pYL2dqcEpjbkVydEx3SwpzM0NSd1lNbkc0cHNlM0Q4cDJuZTJIVmhwTXVjMzJ0VThxKytMakNuKzRXVGEyMWoyMjR3TEJRTVlBUHBRaGUyCmFqSVkzeHBsU2MvK2N2WkVrbmlFb2M0TVl2SFJIMmF6Z0k4RlBrNEI1RDMwYlorS0NRbStFZFVDZ1lFQXdBQ2kKeUFuL3VWc0V4VGlSa3hvRklUTjdSSjVGUE1EOHpPcll1SHBnVTBadTVsNlpFU2V4Z2hwUnNreWZUWUcvK1ZHRgpERnFUZE9vK1BRWEtIbTVha2p0WEh6cm52ZGFmUkNNRU43anZMcExYU2k0UVFsZDYyNER0WS9Hd1Z2RFNGQXlnCnNadHhJUUFYTmJSS2JZenJ4T1FMZ0xETEF3a0NjQVZJZG9wYlVSVUNnWUJoR0Eydm5mcE4xV0QxVWdKTG5Ob2wKNEdzVS9TeW9mVERuaEVMeTd0Y3FmRTg2TlVxbmJ4QTNXU01rbW8rVnRtTTVvR2tJbXdraWFvb3NNdCttUVB3UApPeWVzTXBxUEdOcWJ6cmZ2V1pCMVhEZFRVSS9jQzBsVVF1eTRJM0crdCsyRktma3VNd1k0enRyLy9zem5wR1NBCktuSUhhQ2tzQ3NySVZ0cGhSaldTWFFLQmdCNGJ1MnNORGxuZHFRallUeE8zUDlpdC93V0tvQ2JmeUlURnl3aGEKd0dJdXFGTmR3RGtOZFd1R2Z3c3Jzc3R2cmxBRmRZeXpZMjR4RVdOMlZmU2hyM2hBNysrSXlEQmZ5SWZoeWRhSApISks4R2lDYXlwZnNxZXBqOUZYNDM0TXlybTdRY0I2SjFwcXJMZmlROWg3cHUwc2J5Nlg1azB3OWpIRk9rc2RyCitOZmxBb0dCQUo1eFhDMmRnS2lReFU4QkV6dG8xdEQ2OXd3cEJUWGxIZkx1ZC9yYW8xWnNibTVPM0tBdUtEczUKb3BkQ1I3UWVrOXA2WkQzNjhKbHV2RkI0bDNpbEV3QW13L3RzMUJ2cDNadXhmVTAyQ3pHaG05QlNzNkxiVFJNMQpsYTRmT1V5QjBOeUMveE1qYXZ3UFdHU0d3cEd5cGtZMzMzMUhiNVlQQzhqTW8rRTlCMEpDCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
    owner: localadmin:localadmin
    permissions: '0600'
    encoding: base64
    defer: true
  - path: /home/localadmin/.ssh/id_rsa.pub
    content: |
      ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQChnBcEPJsK6eP16A1SoeHPtDwjXxSBKEbZpzv21wwL8E1vS93yxDtPqk9877FxE6/J2qwwKJnC3Iz3KBkdCPzokrin2SHSygWTqE8MO3Qv7vg/ZHNvr5RqcmRonG/Hk+usoxyx6Tsu2gG7ZzJqr6W5Wr2EWUxxPTJ/duPMRvYriOGv4aIyrE7FVe7dzEmxbzMmxSfTUVP5MicrgzrwyPj1T8oYv44l6JoIOac8QqzKZ6hVL3604sMA+4UuySCaLsctGBHmbmO0m0Mbsr7ArAGmYfAY1WFuKjU3BYgbKvn2j57LP6O1d3tgywCETQIzyZpA7bvAE7aH8OUDOy4Y8tt5 github_anonymous

    owner: localadmin:localadmin
    permissions: '0644'
    defer: true
  - path: /home/wordpress/.ssh/authorized_keys
    content: |
      ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCX3ZnnojSpqi1R7CWmP7uVFU2fEd2uS4PYQpWC23ScmDGP7KFHeTJfMc6eMaAhbxfIXx2CFdsIhP5U58BFLmAxkUIM8lGnHgh1uME/aOMZokZrDhYnw0eaamVOg0rdKD/uaTo87ASoxpf0XYnrqcrYhFIQodxjsCC8pCU5Egjh9QDgHsniJ5vWEkxZGPQ4SXIj4txh8uXMI0mh57BWJRK0zJIDzZCxubtrOpWoQnVvg/ZV+Thgy0P9m7e8OHbaM3U/7p4DBd1MZ95jNwjefMeD5hR46T35rkR9w/ebEIKhGjz0UB2yRUZPOPqBzVfixYA6gfd5c1AhjluCyCqhLEMd Generated-by-Nova

    owner: wordpress:wordpress
    permissions: '0600'
    append: true
    defer: true
  - path: /etc/ssl.crt
    content: |
      LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVwakNDQTQ2Z0F3SUJBZ0lVR0U4ZzhIOXlxNkxOQWRjS3NIYUNkOW1HWTZNd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2dZc3hDekFKQmdOVkJBWVRBbFZUTVJrd0Z3WURWUVFLRXhCRGJHOTFaRVpzWVhKbExDQkpibU11TVRRdwpNZ1lEVlFRTEV5dERiRzkxWkVac1lYSmxJRTl5YVdkcGJpQlRVMHdnUTJWeWRHbG1hV05oZEdVZ1FYVjBhRzl5CmFYUjVNUll3RkFZRFZRUUhFdzFUWVc0Z1JuSmhibU5wYzJOdk1STXdFUVlEVlFRSUV3cERZV3hwWm05eWJtbGgKTUI0WERUSXpNRFl3T0RFME16TXdNRm9YRFRJME1EWXdOekUwTXpNd01Gb3dZakVaTUJjR0ExVUVDaE1RUTJ4dgpkV1JHYkdGeVpTd2dTVzVqTGpFZE1Cc0dBMVVFQ3hNVVEyeHZkV1JHYkdGeVpTQlBjbWxuYVc0Z1EwRXhKakFrCkJnTlZCQU1USFVOc2IzVmtSbXhoY21VZ1QzSnBaMmx1SUVObGNuUnBabWxqWVhSbE1JSUJJakFOQmdrcWhraUcKOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQW9abStuRE1Vazg5WUxIZ1dSYU8yenltMDA4WHhWTGRRN21qcQpCbk05WHM1RjlhZUtzOThoT2gvS0VsRmZkcjV0UWxSaXhTSW83WnFKVmdraDZQUjFsUG5wOUQvUW1xR21nNGpKCkhWa3cvTDJ0Unc3Tk9JUWxaMTgxdHU5d0h5bkw4WUYzbXFlUnZZbmY1cHhkdmc0L2FHT1dmWlBSVHVpdkVmY1gKYmE4NjBDbnlTMzVHZjB0SGRFUDlaRFFUeW9zQTlKWVJmaXlUaGJReEdVWmh3TmVKNnhYMnJzR2Q1ZHgxY0JjMgpKRXcyaWd5VDZGMldtenRBaXJhVHBRUkd6bjQyeFVMUnRZQU5tV01kUDZXSCthWnErNi9XaDljaXF1L2E3MmdrClU5TmwvTEFaRnQzUS9RZVovOGgyUDF3eU04dTJYK3prMGhHSE15NDBYRFdMenUyTmFRSURBUUFCbzRJQktEQ0MKQVNRd0RnWURWUjBQQVFIL0JBUURBZ1dnTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQ0JnZ3JCZ0VGQlFjRApBVEFNQmdOVkhSTUJBZjhFQWpBQU1CMEdBMVVkRGdRV0JCUlcwWk0rUXpFdEdyVnFFWXdFZVc5TFVreG9KekFmCkJnTlZIU01FR0RBV2dCUWs2Rk5YWFh3MFFJZXA2NVRidXVFV2VQd3BwREJBQmdnckJnRUZCUWNCQVFRME1ESXcKTUFZSUt3WUJCUVVITUFHR0pHaDBkSEE2THk5dlkzTndMbU5zYjNWa1pteGhjbVV1WTI5dEwyOXlhV2RwYmw5agpZVEFwQmdOVkhSRUVJakFnZ2c4cUxtUnZZM1J2Y2kxbGR5NWpiMjJDRFdSdlkzUnZjaTFsZHk1amIyMHdPQVlEClZSMGZCREV3THpBdG9DdWdLWVluYUhSMGNEb3ZMMk55YkM1amJHOTFaR1pzWVhKbExtTnZiUzl2Y21sbmFXNWYKWTJFdVkzSnNNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUE5c01xaW9tck1WY0h1YjJhUTgwcjZ1d241OEFFVApXNGppdDQrMWdIZTludVJLYndtYjgyR01nRkJEQ0tjMkx0b0pkMTExWk9yQXQrNkE0V0xYclY5U2VSV3R2U0pJCnN3eHh5N3BaQWtMRFZVODVaQTZjYVZod2hBVno5b1FGY0ZtbTNHVzZGcmdmUWsxTjFZaDBEL0UwcWdWSHhGeUgKSVlTYTVGYlAwQTB4MWlXc3pCa0I3RXZGR2VlNlNFeWlsa0IwTXBtSWVIWndheTRLSjNqb2V5emxZQXVFaVNSeQpPZnBBdUdERHRmZWJ6M3krSFJETys2OTUzS1lCN21Sb1NCbjV4a3Z6UzJpNS9aVGgwYVozQkVFSmVpc3BJOEdyCkZOVUFBNHVNLzZQR0lDK211YTcrcGl1M01yZ3dHMW9xTkk5OVh2UlFsbFE2Sk4wTjFUbU5CUkQzCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KCg==
    owner: root:root
    permissions: '0644'
    encoding: base64
    defer: true
  - path: /etc/ssl.key
    owner: root:root
    permissions: '0600'
    content: |
      LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2QUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktZd2dnU2lBZ0VBQW9JQkFRQ2htYjZjTXhTVHoxZ3MKZUJaRm83YlBLYlRUeGZGVXQxRHVhT29HY3oxZXprWDFwNHF6M3lFNkg4b1NVVjkydm0xQ1ZHTEZJaWp0bW9sVwpDU0hvOUhXVStlbjBQOUNhb2FhRGlNa2RXVEQ4dmExSERzMDRoQ1ZuWHpXMjczQWZLY3Z4Z1hlYXA1RzlpZC9tCm5GMitEajlvWTVaOWs5Rk82SzhSOXhkdHJ6clFLZkpMZmtaL1MwZDBRLzFrTkJQS2l3RDBsaEYrTEpPRnRERVoKUm1IQTE0bnJGZmF1d1ozbDNIVndGellrVERhS0RKUG9YWmFiTzBDS3RwT2xCRWJPZmpiRlF0RzFnQTJaWXgwLwpwWWY1cG1yN3I5YUgxeUtxNzlydmFDUlQwMlg4c0JrVzNkRDlCNW4veUhZL1hESXp5N1pmN09UU0VZY3pMalJjCk5Zdk83WTFwQWdNQkFBRUNnZ0VBRWh4Um94NUxabFJVdUtrZHIrRE01bE14ZjVGZHZrV01KYWZ1NEZtdWJVOVgKUWxSc1JFUFRyTGl1MUJZNENXNEdmeXBIWm5ueFZjMmRxaDE4WmlmdGZJeDBsb25IVm1rYTZQOWRzTE1UL1NOQgp4ZWFvQTdjMW5PdnI4R3hOcDhSdXBZcUJyYnl0WmUxTGdVUVJjbkVVMUoxaW1vREVNcUI3ckZzQmptcVd3QWpoCmlvd2MrSzBPcjBsZUZoVmVrb1pjRFRzaG9vQndXci9yUVJrTmJuVkY0ejcvYjdiWGlnejlKTjVZbkxBQmMvd2sKR2lIYnRsQ0NKeks3alcrR29OSUpLTmdGWWc2cTVDN2R1WWxISno2TVlSeFp2WVloN29NcUhkZytLdlVERWxzRAoyaTkrTUdmdkhEUWRxdlp2MUw4aUlxby8rK21rc3hXMnhXakxmWG5ZYlFLQmdRRGo4ZVVhUTJwZEVSeGxmWUxOCkJNL0JXbmVVbzhNaVlvQ3E0dVpLYUlHc2NjUFZtK2NzdWI0aisrcDRTZ0s4QlpodFRiUXU4WjNpT3RBb0NpbFgKajYyUlZVMHE3VnJuT3ZpUXhNUDdNZWRsVWFobEsyNEx6Y3JOcDJDRHpTRDByYW1MVlZMWTlvOWF0cFNYVElnawpORHBLV1VRVU0yQzZZQ2dYQS93aUxHRVQzUUtCZ1FDMWZYZWYxbGh3Q081ZHZTV211ejRWQTlZTDc3Sm9KYWhmCi9CclZhSGRRVDZvaG0wUHdWZEFDa0p1aUIxVXhrUXF2am9IcmVqMUVISXVrRXBRdFVZYSsrUUxjdmpvbTFmb0sKWTBSTjhlZWZxaWtWT2dOaWJJOXUyMjFUQlB5OEU3RGh6U3dkcFZlcWhVK0Q1NjRMUVgwTnJsZGZGVlQvVGJkRQo4YkpOS0dmYy9RS0JnRzZKcm1VbkRoeGxvTlNpb2R5VUdiK1ZCR3BEWSt4M3doZWNncnJRcFJtZjdhelh0cXBjCnhKVWtvOWFEWllJU1lKR1kzZWpwNkh0OXM5WEczN2VEaUZMeS84SHlhbU81bURKMENPbjJrRlQwM1dsNlB4cGcKU0pta01reVlIQVFyZHcySGFlNm0ybXZPSUk2aVlWN1ZLUE5IQ0ptWE5MQU0wMFFkL1pZQTJXN05Bb0dBWkZLVgp4S29VdXVHRStoWXJjTzRDRkZYSmhWR2JtZ3h1OVpnRE1VS002YjBQdTRIN1hTZmlVdmlpdno4MGJiRFNhbGJwCkpFU3ZCeTZNVmtiYTErNUFBT0xmSFN5ZU1vZUhyeVJPUnBQWXlKNmtGUks3ZWpXdVY4WTl1VzJCVTJuREZoNTMKSzNBUmRMWTZUUnpOVFhXRzdnQVlWZndSdndxenF3MjcxUURuNFBVQ2dZQVgzSFlUSi9idk5WN1pDczV3M2ZXQwp5d0N4SXBLVGdOQTZrMlhFZlczcVFaRWgrUnAzNkkySmYrdlo0WDlIMmV3RTMzUVNReGZaRkMwdDZvcDcrVDl3ClZqWVphZnNselloUmZ0OTQvekIyVjdxNUlWZEc1ckV5cFpjTDJ2YmFvWFYzT2M3Q0dUcy9XckUzMWhQNVozQzIKMHFUd0Q2ZG81d0pTSlFUeEEvc0pKUT09Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0KCg==
    encoding: base64
    defer: true
  - path: /opt/wp-deploy/ansible/inventory.yml
    content: |
      YWxsOgogIGhvc3RzOgogICAgbG9jYWxob3N0OgogICAgICBhbnNpYmxlX2Nvbm5lY3Rpb246IGxvY2FsCg==
    owner: localadmin:localadmin
    permissions: '0644'
    defer: true
    encoding: base64
  - path: /opt/wp-deploy/ansible/deploy.yml
    content: |
      LSBuYW1lOiBDb25maWd1cmUgV29yZFByZXNzIGRlcGxveW1lbnQKICBob3N0czogbG9jYWxob3N0CiAgZ2F0aGVyX2ZhY3RzOiBmYWxzZQogIGJlY29tZTogdHJ1ZQoKICB0YXNrczoKICAtIG5hbWU6IFNldCBET01BSU4gdmFyaWFibGUKICAgIHNldF9mYWN0OgogICAgICBET01BSU46ICJ7eyBsb29rdXAoJ2VudicsICdET01BSU4nKSB9fSIKICAgIHdoZW46IERPTUFJTiBpcyBub3QgZGVmaW5lZAoKICAtIG5hbWU6IFNldCBET01BSU4gdG8gcHVibGljIElQIGlmIG5vdCBkZWZpbmVkCiAgICBjb21tYW5kOiAiY3VybCAtcyBodHRwOi8vd2hhdGlzbXlpcC5ha2FtYWkuY29tLyIKICAgIHJlZ2lzdGVyOiBwdWJsaWNfaXAKICAgIGNoYW5nZWRfd2hlbjogZmFsc2UKICAgIHdoZW46IERPTUFJTiBpcyBub3QgZGVmaW5lZAogICAgZmFpbGVkX3doZW46IGZhbHNlCgogIC0gbmFtZTogU2V0IERPTUFJTiB0byBwdWJsaWMgSVAgaWYgbm90IGRlZmluZWQKICAgIHNldF9mYWN0OgogICAgICBET01BSU46ICJ7eyBwdWJsaWNfaXAuc3Rkb3V0IH19IgogICAgd2hlbjogRE9NQUlOIGlzIG5vdCBkZWZpbmVkCgogIC0gbmFtZTogU2V0IFRyZWxsaXMgdmFyaWFibGVzCiAgICBhbnNpYmxlLmJ1aWx0aW4uY29tbWFuZDogdHJlbGxpcyBuZXcgLS1uYW1lICJ7eyBET01BSU4gfX0iIC0taG9zdCAie3sgRE9NQUlOIH19IiAie3sgRE9NQUlOIH19IgogICAgYXJnczoKICAgICAgY3JlYXRlczogInt7IERPTUFJTiB9fS90cmVsbGlzL2dyb3VwX3ZhcnMvYWxsL3VzZXJzLnltbCIKICAgIHJlZ2lzdGVyOiB0cmVsbGlzX291dHB1dAoKICAtIG5hbWU6IENvbmZpZ3VyZSB3ZWJfdXNlcgogICAgYW5zaWJsZS5idWlsdGluLmNvbW1hbmQ6IHlxIC1pICcud2ViX3VzZXIgPSAid29yZHByZXNzIicgInt7IERPTUFJTiB9fS90cmVsbGlzL2dyb3VwX3ZhcnMvYWxsL3VzZXJzLnltbCIKCiAgLSBuYW1lOiBDb25maWd1cmUgYWRtaW5fdXNlcgogICAgYW5zaWJsZS5idWlsdGluLmNvbW1hbmQ6IHlxIC1pICcuYWRtaW5fdXNlciA9ICJsb2NhbGFkbWluIicgInt7IERPTUFJTiB9fS90cmVsbGlzL2dyb3VwX3ZhcnMvYWxsL3VzZXJzLnltbCIKCiAgLSBuYW1lOiBDb25maWd1cmUgd29yZHByZXNzX3NpdGVzCiAgICBhbnNpYmxlLmJ1aWx0aW4uY29tbWFuZDogeXEgLWkgJy53b3JkcHJlc3Nfc2l0ZXMuInt7IERPTUFJTiB9fSIucmVwbyA9ICJnaXRAZ2l0aHViLmNvbTpyb290cy9iZWRyb2NrLmdpdCInICJ7eyBET01BSU4gfX0vdHJlbGxpcy9ncm91cF92YXJzL3Byb2R1Y3Rpb24vd29yZHByZXNzX3NpdGVzLnltbCIKCiAgLSBuYW1lOiBSZW1vdmUgcmVwb19zdWJ0cmVlX3BhdGggbGluZQogICAgYW5zaWJsZS5idWlsdGluLmxpbmVpbmZpbGU6CiAgICAgIHBhdGg6ICJ7eyBET01BSU4gfX0vdHJlbGxpcy9ncm91cF92YXJzL3Byb2R1Y3Rpb24vd29yZHByZXNzX3NpdGVzLnltbCIKICAgICAgcmVnZXhwOiAiXnJlcG9fc3VidHJlZV9wYXRoIgogICAgICBzdGF0ZTogYWJzZW50CgogIC0gbmFtZTogU2V0IHNzbC5lbmFibGVkIHRvIHRydWUKICAgIGFuc2libGUuYnVpbHRpbi5jb21tYW5kOiB5cSAtaSAnLndvcmRwcmVzc19zaXRlcy4ie3sgRE9NQUlOIH19Ii5zc2wuZW5hYmxlZCA9IHRydWUnICJ7eyBET01BSU4gfX0vdHJlbGxpcy9ncm91cF92YXJzL3Byb2R1Y3Rpb24vd29yZHByZXNzX3NpdGVzLnltbCIKCiAgLSBuYW1lOiBTZXQgc3NsLnByb3ZpZGVyIHRvIHNlbGYtc2lnbmVkCiAgICBhbnNpYmxlLmJ1aWx0aW4uY29tbWFuZDogeXEgLWkgJy53b3JkcHJlc3Nfc2l0ZXMuInt7IERPTUFJTiB9fSIuc3NsLnByb3ZpZGVyID0gInNlbGYtc2lnbmVkIicgInt7IERPTUFJTiB9fS90cmVsbGlzL2dyb3VwX3ZhcnMvcHJvZHVjdGlvbi93b3JkcHJlc3Nfc2l0ZXMueW1sIgoKICAtIG5hbWU6IENvbmZpZ3VyZSBob3N0cyBmaWxlCiAgICBhbnNpYmxlLmJ1aWx0aW4ucmVwbGFjZToKICAgICAgcGF0aDogInt7IERPTUFJTiB9fS90cmVsbGlzL2hvc3RzL3Byb2R1Y3Rpb24iCiAgICAgIHJlZ2V4cDogInlvdXJfc2VydmVyX2hvc3RuYW1lIgogICAgICByZXBsYWNlOiAiMTI3LjAuMC4xIgoKICAtIG5hbWU6IENvcHkgbG9jYWxhZG1pbidzIHB1YmxpYyBrZXkgdG8gYXV0aG9yaXplZF9rZXlzCiAgICBhbnNpYmxlLmJ1aWx0aW4ubGluZWluZmlsZToKICAgICAgZGVzdDogIi9ob21lL2xvY2FsYWRtaW4vLnNzaC9hdXRob3JpemVkX2tleXMiCiAgICAgIGxpbmU6ICJ7eyBsb29rdXAoJ2ZpbGUnLCAnL2hvbWUvbG9jYWxhZG1pbi8uc3NoL2lkX3JzYS5wdWInKSB9fSIKICAgIGJlY29tZV91c2VyOiBsb2NhbGFkbWluCgogIC0gbmFtZTogQ29weSBsb2NhbGFkbWluJ3MgcHVibGljIGtleSB0byB3b3JkcHJlc3MgdXNlcidzIGF1dGhvcml6ZWRfa2V5cwogICAgYW5zaWJsZS5idWlsdGluLmxpbmVpbmZpbGU6CiAgICAgIGRlc3Q6ICIvaG9tZS93b3JkcHJlc3MvLnNzaC9hdXRob3JpemVkX2tleXMiCiAgICAgIGxpbmU6ICJ7eyBsb29rdXAoJ2ZpbGUnLCAnL2hvbWUvbG9jYWxhZG1pbi8uc3NoL2lkX3JzYS5wdWInKSB9fSIKICAgIGJlY29tZV91c2VyOiB3b3JkcHJlc3MKCiAgLSBuYW1lOiBDb3B5IGxvY2FsYWRtaW4ncyBpZF9yc2EgdG8gd29yZHByZXNzIHVzZXIncyAuc3NoIGRpcmVjdG9yeQogICAgYW5zaWJsZS5idWlsdGluLmNvcHk6CiAgICAgIHNyYzogIi9ob21lL2xvY2FsYWRtaW4vLnNzaC9pZF9yc2EiCiAgICAgIGRlc3Q6ICIvaG9tZS93b3JkcHJlc3MvLnNzaC9pZF9yc2EiCiAgICAgIG1vZGU6ICIwNjAwIgogICAgYmVjb21lX3VzZXI6IHdvcmRwcmVzcwoKICAtIG5hbWU6IENvcHkgbG9jYWxhZG1pbidzIGlkX3JzYS5wdWIgdG8gd29yZHByZXNzIHVzZXIncyAuc3NoIGRpcmVjdG9yeQogICAgYW5zaWJsZS5idWlsdGluLmNvcHk6CiAgICAgIHNyYzogIi9ob21lL2xvY2FsYWRtaW4vLnNzaC9pZF9yc2EucHViIgogICAgICBkZXN0OiAiL2hvbWUvd29yZHByZXNzLy5zc2gvaWRfcnNhLnB1YiIKICAgICAgbW9kZTogIjA2NDQiCiAgICBiZWNvbWVfdXNlcjogd29yZHByZXNzCgogIC0gbmFtZTogQ2hhbmdlIG93bmVyc2hpcCBvZiB3b3JkcHJlc3MgdXNlcidzIC5zc2ggZGlyZWN0b3J5CiAgICBhbnNpYmxlLmJ1aWx0aW4uZmlsZToKICAgICAgcGF0aDogIi9ob21lL3dvcmRwcmVzcy8uc3NoIgogICAgICBvd25lcjogd29yZHByZXNzCiAgICAgIGdyb3VwOiB3b3JkcHJlc3MKICAgICAgcmVjdXJzZTogeWVzCgogIC0gbmFtZTogU2V0IGxldHNlbmNyeXB0X2NvbnRhY3RfZW1haWxzIGFuZCBpcF93aGl0ZWxpc3QKICAgIGFuc2libGUuYnVpbHRpbi5saW5laW5maWxlOgogICAgICBkZXN0OiAie3sgRE9NQUlOIH19L3RyZWxsaXMvZ3JvdXBfdmFycy9hbGwvbWFpbi55bWwiCiAgICAgIGxpbmU6ICJ7eyBpdGVtIH19IgogICAgbG9vcDoKICAgIC0gImxldHNlbmNyeXB0X2NvbnRhY3RfZW1haWxzOiBbICdtYWlsQHt7IERPTUFJTiB9fScgXSIKICAgIC0gImlwX3doaXRlbGlzdDogWyAnMC4wLjAuMCcgXSIKICAgIC0gInNzaF9jbGllbnRfaXBfbG9va3VwOiBmYWxzZSIKCiAgLSBuYW1lOiBSYWlzZSBpcGlmeSB0aW1lb3V0CiAgICBhbnNpYmxlLmJ1aWx0aW4ubGluZWluZmlsZToKICAgICAgcGF0aDogInt7IERPTUFJTiB9fS90cmVsbGlzL3JvbGVzL2NvbW1vbi90YXNrcy9tYWluLnltbCIKICAgICAgbGluZTogIiAgICAgICAgdGltZW91dDogNjAiCiAgICAgIGluc2VydGFmdGVyOiAiXiAgICBpcGlmeV9mYWN0czoiCiAgICByZWdpc3RlcjogbGluZV9pbnNlcnRfcmVzdWx0CiAgICBmYWlsZWRfd2hlbjogbGluZV9pbnNlcnRfcmVzdWx0IGlzIGZhaWxlZAoKICAtIG5hbWU6IFByb3Zpc2lvbiBwcm9kdWN0aW9uIGVudmlyb25tZW50CiAgICBhbnNpYmxlLmJ1aWx0aW4uY29tbWFuZDogdHJlbGxpcyBwcm92aXNpb24gcHJvZHVjdGlvbgogICAgYXJnczoKICAgICAgY2hkaXI6ICJ7eyBET01BSU4gfX0vdHJlbGxpcyIKCiAgLSBuYW1lOiBEZXBsb3kgdG8gcHJvZHVjdGlvbiBlbnZpcm9ubWVudAogICAgYW5zaWJsZS5idWlsdGluLmNvbW1hbmQ6IHRyZWxsaXMgZGVwbG95IHByb2R1Y3Rpb24KICAgIGFyZ3M6CiAgICAgIGNoZGlyOiAie3sgRE9NQUlOIH19L3RyZWxsaXMiCg==
    owner: localadmin:localadmin
    permissions: '0644'
    defer: true
    encoding: base64
runcmd:
  - cp /etc/skel/.bashrc /home/localadmin/.bashrc
  - sed -i 's/#force_color_prompt=yes/force_color_prompt=yes/g' /home/localadmin/.bashrc
  - cp -f /home/localadmin/.bashrc /home/localadmin/.profile
  - chown localadmin:localadmin -R /home/localadmin/
  - chown localadmin:localadmin -R /opt/wp-deploy
  - sudo su - localadmin -c "bash /opt/wp-deploy/install.sh"
  - systemctl restart ssh