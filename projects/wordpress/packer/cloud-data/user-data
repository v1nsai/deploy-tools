#cloud-config
ssh_pwauth: true
users:
  - name: root
    lock_passwd: false
    hashed_passwd: $6$rounds=4096$s0cBOA5fV0NQT3a7$x1/wtO50h8UjYX.AuEN1qxr9z4Tw7.bhW/DeGY1z8ZtPmS245FkezDAogv1/ZxLfazSING3H0qW2z6qXeDPkH0
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCX3ZnnojSpqi1R7CWmP7uVFU2fEd2uS4PYQpWC23ScmDGP7KFHeTJfMc6eMaAhbxfIXx2CFdsIhP5U58BFLmAxkUIM8lGnHgh1uME/aOMZokZrDhYnw0eaamVOg0rdKD/uaTo87ASoxpf0XYnrqcrYhFIQodxjsCC8pCU5Egjh9QDgHsniJ5vWEkxZGPQ4SXIj4txh8uXMI0mh57BWJRK0zJIDzZCxubtrOpWoQnVvg/ZV+Thgy0P9m7e8OHbaM3U/7p4DBd1MZ95jNwjefMeD5hR46T35rkR9w/ebEIKhGjz0UB2yRUZPOPqBzVfixYA6gfd5c1AhjluCyCqhLEMd Generated-by-Nova
  - name: localadmin
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: users, admin, sudo
    shell: /bin/bash
    lock_passwd: false
    passwd: $6$rounds=4096$nQEeaHtrjiUlxOPi$LQlgi0XBR6u46AJFhWxsWBBK8YqHbGWYWkWnG.YhmdYkc/lMiAacMwQAbZ0W7MosLFexushHQpfa05eG7gsL/1
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCX3ZnnojSpqi1R7CWmP7uVFU2fEd2uS4PYQpWC23ScmDGP7KFHeTJfMc6eMaAhbxfIXx2CFdsIhP5U58BFLmAxkUIM8lGnHgh1uME/aOMZokZrDhYnw0eaamVOg0rdKD/uaTo87ASoxpf0XYnrqcrYhFIQodxjsCC8pCU5Egjh9QDgHsniJ5vWEkxZGPQ4SXIj4txh8uXMI0mh57BWJRK0zJIDzZCxubtrOpWoQnVvg/ZV+Thgy0P9m7e8OHbaM3U/7p4DBd1MZ95jNwjefMeD5hR46T35rkR9w/ebEIKhGjz0UB2yRUZPOPqBzVfixYA6gfd5c1AhjluCyCqhLEMd Generated-by-Nova
  - name: wordpress
    groups: [www-data]
    shell: /bin/bash
    lock_passwd: false
    ssh_pwauth: true
    passwd: $6$rounds=4096$s0cBOA5fV0NQT3a7$x1/wtO50h8UjYX.AuEN1qxr9z4Tw7.bhW/DeGY1z8ZtPmS245FkezDAogv1/ZxLfazSING3H0qW2z6qXeDPkH0
apt:
  preserve_sources_list: true
package_update: false
write_files:
  - path: /etc/ssh/sshd_config
    content: |
      IyEvYmluL2Jhc2gKCnNldCAtZQoKIyBTZXQgdmFyaWFibGVzIGFuZCBjcmVhdGUgd29ya2luZyBk
      aXJlY3RvcnkKREVWRU5WPSJwcm9kdWN0aW9uIgpTRVJWRVJJUD0kKGN1cmwgLXMgaHR0cDovL3do
      YXRpc215aXAuYWthbWFpLmNvbS8pCnN1ZG8gbWtkaXIgLXAgL29wdC93cC1kZXBsb3kKc3VkbyBj
      aG93biAtUiBsb2NhbGFkbWluOmxvY2FsYWRtaW4gL29wdC93cC1kZXBsb3kKY2QgL29wdC93cC1k
      ZXBsb3kKCiMgR2VuZXJhdGUgYSBETlMgcmVjb3JkIGZvciB0aGUgc2VydmVyCmlmIFtbIC16ICRE
      T01BSU4gXV07IHRoZW4KICAgIGVjaG8gIkVSUk9SIC0gRE9NQUlOIHZhciBtdXN0IGJlIHNldCB0
      byBlaXRoZXIgYSB2YWxpZCBkb21haW4gbmFtZSBvciAnZHluYW1pYycgZm9yIGEgZHluYW1pYyBk
      bnMiCiAgICBleGl0IDEKZmkKCmlmIFtbICRET01BSU4gPT0gImR5bmFtaWMiIF1dOyB0aGVuCiAg
      ICBlY2hvICJHZW5lcmF0aW5nIGEgZHluYW1pYyBETlMgcmVjb3JkIGZvciAkU0VSVkVSSVAuLi4i
      CiAgICBET01BSU49JCgvb3B0L3dwLWRlcGxveS9jbG91ZGZsYXJlL2NyZWF0ZS10ZW1wLXJlY29y
      ZC5zaCkKZmkKCiMgSW5zdGFsbCBkZXBlbmRlbmNpZXMKY3VybCAtc0wgaHR0cHM6Ly9yb290cy5p
      by90cmVsbGlzL2NsaS9nZXQgfCBzdWRvIGJhc2gKcHl0aG9uMyAtbSBwaXAgaW5zdGFsbCB2aXJ0
      dWFsZW52IGFuc2libGUKIyAvaG9tZS9sb2NhbGFkbWluLy5sb2NhbC9iaW4vYW5zaWJsZS1nYWxh
      eHkgaW5zdGFsbCBrd29vZHNvbi55ZWRpdApzdWRvIHdnZXQgaHR0cHM6Ly9naXRodWIuY29tL21p
      a2VmYXJhaC95cS9yZWxlYXNlcy9sYXRlc3QvZG93bmxvYWQveXFfbGludXhfYW1kNjQgLU8gL3Vz
      ci9iaW4veXEKc3VkbyBjaG1vZCAreCAvdXNyL2Jpbi95cQoKIyBDcmVhdGUgYSBuZXcgcHJvamVj
      dAppZiBbWyAkU1NMX1BST1ZJU0lPTkVSID09ICJub25lIiBdXTsgdGhlbgogICAgdHJlbGxpcyBu
      ZXcgLS1ob3N0ICRTRVJWRVJJUCAtLW5hbWUgJFNFUlZFUklQICRTRVJWRVJJUCB8fCBlY2hvICJU
      cmVsbGlzIHByb2plY3QgYWxyZWFkeSBleGlzdHMsIGNvbnRpbnVpbmcuLi4iCiAgICBET01BSU49
      JFNFUlZFUklQCmVsc2UKICAgIHRyZWxsaXMgbmV3IC0taG9zdCAkRE9NQUlOIC0tbmFtZSAkRE9N
      QUlOICRET01BSU4gfHwgZWNobyAiVHJlbGxpcyBwcm9qZWN0IGFscmVhZHkgZXhpc3RzLCBjb250
      aW51aW5nLi4uIlxqCmZpCgojIENvbmZpZ3VyZSB1c2Vycwp5cSAtaSAnLndlYl91c2VyID0gIndv
      cmRwcmVzcyInICRET01BSU4vdHJlbGxpcy9ncm91cF92YXJzL2FsbC91c2Vycy55bWwKeXEgLWkg
      Jy5hZG1pbl91c2VyID0gImxvY2FsYWRtaW4iJyAkRE9NQUlOL3RyZWxsaXMvZ3JvdXBfdmFycy9h
      bGwvdXNlcnMueW1sCgojIENvbmZpZ3VyZSB3b3JkcHJlc3Nfc2l0ZXMKc2VkIC1pICdzL2V4YW1w
      bGVcLmNvbS8nJERPTUFJTicvZycgJERPTUFJTi90cmVsbGlzL2dyb3VwX3ZhcnMvJERFVkVOVi93
      b3JkcHJlc3Nfc2l0ZXMueW1sCnlxIC1pICcud29yZHByZXNzX3NpdGVzLiInJERPTUFJTiciLnJl
      cG8gPSAiZ2l0QGdpdGh1Yi5jb206cm9vdHMvYmVkcm9jay5naXQiJyAkRE9NQUlOL3RyZWxsaXMv
      Z3JvdXBfdmFycy8kREVWRU5WL3dvcmRwcmVzc19zaXRlcy55bWwKc2VkIC1pICcvcmVwb19zdWJ0
      cmVlX3BhdGgvIHMvLiovLycgJERPTUFJTi90cmVsbGlzL2dyb3VwX3ZhcnMvJERFVkVOVi93b3Jk
      cHJlc3Nfc2l0ZXMueW1sCgojIFNTTCBjb25maWcKY2FzZSAkU1NMX1BST1ZJU0lPTkVSIGluCiAg
      ICBlY2hvICJTU0xfUFJPVklTSU9ORVIgc2V0IHRvICRTU0xfUFJPVklTSU9ORVIiCiAgICAibGV0
      c2VuY3J5cHQiKQogICAgICAgIGVjaG8gIlNldHRpbmcgdXAgbGV0c2VuY3J5cHQuLi4iCiAgICAg
      ICAgeXEgLWkgJy53b3JkcHJlc3Nfc2l0ZXMuIickRE9NQUlOJyIuc3NsLmVuYWJsZWQgPSB0cnVl
      JyAkRE9NQUlOL3RyZWxsaXMvZ3JvdXBfdmFycy8kREVWRU5WL3dvcmRwcmVzc19zaXRlcy55bWwK
      ICAgICAgICB5cSAtaSAnLndvcmRwcmVzc19zaXRlcy4iJyRET01BSU4nIi5zc2wucHJvdmlkZXIg
      PSAibGV0c2VuY3J5cHQiJyAkRE9NQUlOL3RyZWxsaXMvZ3JvdXBfdmFycy8kREVWRU5WL3dvcmRw
      cmVzc19zaXRlcy55bWwKICAgICAgICA7OwogICAgIm1hbnVhbCIpCiAgICAgICAgZWNobyAiU2V0
      dGluZyB1cCBtYW51YWwgU1NMLi4uIgogICAgICAgIHNlZCAtaSAnL3NzbDovLC9sZXRzZW5jcnlw
      dC9jXCAgICBzc2w6XG4gICAgICBlbmFibGVkOiB0cnVlXG4gICAgICBwcm92aWRlcjogbWFudWFs
      XG4gICAgICBjZXJ0OiAvZXRjL3NzbC5jcnRcbiAgICAgIGtleTogL2V0Yy9zc2wua2V5JyAkRE9N
      QUlOL3RyZWxsaXMvZ3JvdXBfdmFycy8kREVWRU5WL3dvcmRwcmVzc19zaXRlcy55bWwgIyBUT0RP
      IHVzZSB5cSB0byBhZGQgbmV3IGtleXMKICAgICAgICA7OwogICAgIm5vbmUiKQogICAgICAgIGVj
      aG8gIk5vdCBzZXR0aW5nIHVwIFNTTC4iCiAgICAgICAgeXEgLWkgJy53b3JkcHJlc3Nfc2l0ZXMu
      IickRE9NQUlOJyIuc3NsLmVuYWJsZWQgPSBmYWxzZScgJERPTUFJTi90cmVsbGlzL2dyb3VwX3Zh
      cnMvJERFVkVOVi93b3JkcHJlc3Nfc2l0ZXMueW1sCiAgICAgICAgOzsKICAgICopCiAgICAgICAg
      ZWNobyAiU1NMX1BST1ZJU0lPTkVSIG5vdCBzZXQsIG5vdCBzZXR0aW5nIHVwIFNTTC4iCiAgICAg
      ICAgeXEgLWkgJy53b3JkcHJlc3Nfc2l0ZXMuIickRE9NQUlOJyIuc3NsLmVuYWJsZWQgPSBmYWxz
      ZScgJERPTUFJTi90cmVsbGlzL2dyb3VwX3ZhcnMvJERFVkVOVi93b3JkcHJlc3Nfc2l0ZXMueW1s
      CiAgICA7Owplc2FjCgojIENvbmZpZ3VyZSBob3N0cwpzZWQgLWkgJ3MveW91cl9zZXJ2ZXJfaG9z
      dG5hbWUvMTI3LjAuMC4xL2cnICRET01BSU4vdHJlbGxpcy9ob3N0cy8kREVWRU5WCgojIEFkZCBh
      bGwgcHVia2V5cyB0byB0aGUgYXV0aG9yaXplZF9rZXlzIGZpbGUgZm9yIHByaXZpbGVnZWQgYW5k
      IG5vbiBwcml2aWxlZ2VkIHVzZXJzCnN1ZG8gY3AgLWYgL2hvbWUvbG9jYWxhZG1pbi8uc3NoLyog
      L3Jvb3QvLnNzaC8Kc3VkbyBta2RpciAtcCAvaG9tZS93b3JkcHJlc3MvLnNzaApjYXQgL2hvbWUv
      bG9jYWxhZG1pbi8uc3NoLyoucHViIHwgc3VkbyB0ZWUgLWEgL2hvbWUvbG9jYWxhZG1pbi8uc3No
      L2F1dGhvcml6ZWRfa2V5cwpjaG1vZCA2MDAgL2hvbWUvbG9jYWxhZG1pbi8uc3NoL2lkX3JzYQpz
      dWRvIGNwIC9ob21lL2xvY2FsYWRtaW4vLnNzaC8qIC9ob21lL3dvcmRwcmVzcy8uc3NoLwpzdWRv
      IGNwIC9ob21lL2xvY2FsYWRtaW4vLnNzaC8qIC9yb290Ly5zc2gvCnN1ZG8gY2hvd24gd29yZHBy
      ZXNzOndvcmRwcmVzcyAtUiAvaG9tZS93b3JkcHJlc3MvLnNzaC8Kc3VkbyBjaG93biBsb2NhbGFk
      bWluOmxvY2FsYWRtaW4gLVIgL2hvbWUvbG9jYWxhZG1pbi8uc3NoLwoKIyBDb25maWd1cmUgYWNj
      ZXNzCmlmIFtbIC16ICRET01BSU4gXV0gOyB0aGVuCiAgICBlY2hvICdsZXRzZW5jcnlwdF9jb250
      YWN0X2VtYWlsczogWyAibWFpbEAnJERPTUFJTiciIF0nID4+ICRET01BSU4vdHJlbGxpcy9ncm91
      cF92YXJzL2FsbC9tYWluLnltbAplbHNlCiAgICBlY2hvICdsZXRzZW5jcnlwdF9jb250YWN0X2Vt
      YWlsczogWyAibWFpbEB5b3VyZG9tYWluLmNvbSIgXScgPj4gJERPTUFJTi90cmVsbGlzL2dyb3Vw
      X3ZhcnMvYWxsL21haW4ueW1sCmZpCmVjaG8gJ2lwX3doaXRlbGlzdDogWyAiMC4wLjAuMCIgXScg
      Pj4gJERPTUFJTi90cmVsbGlzL2dyb3VwX3ZhcnMvYWxsL21haW4ueW1sCmVjaG8gJ3NzaF9jbGll
      bnRfaXBfbG9va3VwOiBmYWxzZScgPj4gJERPTUFJTi90cmVsbGlzL2dyb3VwX3ZhcnMvYWxsL21h
      aW4ueW1sCgojIEJ1ZyBmaXhlcwojIFJhaXNlIGlwaWZ5IHRpbWVvdXQKc2VkIC1pICdzL2lwaWZ5
      X2ZhY3RzOi9pcGlmeV9mYWN0czpcbiAgICAgICAgdGltZW91dDogNjAvZycgJERPTUFJTi90cmVs
      bGlzL3JvbGVzL2NvbW1vbi90YXNrcy9tYWluLnltbAojIFJhaXNlIHRoZSBsb2NrIHRpbWVvdXQg
      Zm9yIGFwdApzZWQgLWkgJy8tIG5hbWU6IGVuc3VyZSBmZXJtIGlzIGluc3RhbGxlZC97TjtzLyQv
      XG4gICAgbG9ja190aW1lb3V0OiA2MDAvO30nICRET01BSU4vdHJlbGxpcy9yb2xlcy9mZXJtL3Rh
      c2tzL21haW4ueW1sCiMgRm9yY2UgdW5hdHRlbmRlZC11cGdyYWRlcyB0byBydW4gc28gaXQgd2ls
      bCBxdWl0IGludGVyZmVyaW5nIHdpdGggdHJlbGxpcyB0aGVuIHJlbW92ZSB0aGUgbG9jayBmaWxl
      IHRoYXQgaXNuJ3QgZ2V0dGluZyByZW1vdmVkIGZvciBzb21lIHJlYXNvbgpzdWRvIHVuYXR0ZW5k
      ZWQtdXBncmFkZSAtZApzdWRvIHJtIC92YXIvbGliL2Rwa2cvbG9jay1mcm9udGVuZAoKZXhpdCAw
      CiMgUHJvdmlzaW9uIGFuZCBkZXBsb3kgdG8gbG9jYWxob3N0CmNkICRET01BSU4vdHJlbGxpcwp0
      cmVsbGlzIHByb3Zpc2lvbiAkREVWRU5WCnRyZWxsaXMgZGVwbG95ICRERVZFTlYKCiMgRGlzYWJs
      ZSByb290IGxvZ2luIGFuZCByZW1vdmUgdGhlIGluc3RhbGwgc2NyaXB0IGZyb20gdGhlIGNyb250
      YWIKZWNobyAtbiAiUGVybWl0Um9vdExvZ2luIG5vIiB8IHN1ZG8gdGVlIC1hIC9ldGMvc3NoL3Nz
      aGRfY29uZmlnCnN1ZG8gY3JvbnRhYiAtcgoKIyBlY2hvIC1uICJHIiB8IGF3cyBlYzIgZ2V0LWNv
      bnNvbGUtb3V0cHV0IC0taW5zdGFuY2UtaWQgJChzY3JpcHRzL2dldC1pbnN0YW5jZS1pZC1uYW1l
      LnNoIGJtbykgXAojICAgICAtLW91dHB1dCB0ZXh0IFwKIyAgICAgLS1sYXRlc3Q=
    append: true
  - path: /home/localadmin/.ssh/config
    content: |
      Host 127.0.0.1 localhost
        StrictHostKeyChecking no

      Host github.com
        User git
        HostName github.com
        IdentityFile ~/.ssh/id_rsa
        StrictHostKeyChecking no
    owner: localadmin:localadmin
    permissions: '0600'
    defer: true
  - path: /home/wordpress/.ssh/authorized_keys
    content: |
      ${data.local_file.ssh-pubkey.content}
    owner: wordpress:wordpress
    permissions: '0600'
    append: true
    defer: true
  - path: /etc/crontab
    content: |
      30 23   * * *   root    /usr/sbin/shutdown -h
    append: true
    defer: true
