#cloud-config
package_update: true
packages:
  - bash-completion
users:
  - name: drew
    sudo: ['ALL=(ALL) NOPASSWD:ALL']
    groups: sudo
    shell: /bin/bash
    ssh-authorized-keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDQlba47olSkYMMh40lIMnU5TPAYStp4FrSPvruGmuM01OYSbamZdE7fEec3UnSKR6rQNpEthVqr61tlz2yXxnWbOmLBaxQwT8Q1h3wiEWR5WPeBUmDpuEmHJtZzUZKeUABDQHfywN01yZ8RZssCdPvziS9t9pgeHlfL4hnkAFNbhgfOniNhtEIBeLsmNDinAH2TvCXv3cYTzwXC9n2E3ruwEgmWTxieWNVFBoa8QKkhXiw+h08cYv9ZaP5yi8h2oXpJTKFUZ5LId1xuIhb95K7sBLr83vMLU7CGjlFTvet6MiEKXrPjY1hbvUf1+uFZZQSYOANR+9Gtviolxux7IAH Generated by Nova
write_files:
  - content: |
      Port 1355
      PermitRootLogin no
    path: /etc/ssh/sshd_config.d/local.conf
  - content: |
      export STORE_PKI=true
      export DNS_ADBLOCKING=true
      export USERS=user1,user2
      #REPO_SLUG=trailofbits/algo
      #REPO_BRANCH=master
    path: /etc/environment
    append: true
  - content: |
      #!/bin/bash
      curl -s https://raw.githubusercontent.com/trailofbits/algo/master/install.sh | sudo -E bash -x
    path: /etc/wireguard-init.sh
    permissions: '0755'
runcmd:
  - /etc/wireguard-init.sh
  - echo drew:jonk9ym. | chpasswd